import { useState } from "react";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import { Preview as MyPreview } from "@storybook/components";
import LinkTo from "@storybook/addon-links/react";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import {
  ActionPopover,
  ActionPopoverDivider,
  ActionPopoverItem,
  ActionPopoverMenu,
  ActionPopoverMenuButton,
} from ".";
import { MenuItem } from "./action-popover-item/action-popover-item.component";
import { Accordion } from "../accordion";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import DocsWrapper from "../../../.storybook/docs-helpers/components/iframe-wrapper";
import Link from "../link";
import {
  FlatTable,
  FlatTableHead,
  FlatTableBody,
  FlatTableRow,
  FlatTableHeader,
  FlatTableCell,
} from "../flat-table";

<Meta
  title="Action Popover"
  parameters={{ info: { disable: true }, chromatic: { disable: true } }}
/>

# ActionPopover

ActionPopovers present a handy list of actions the user can perform on a whole table, a specific row within a table, or a tile.
Click the ellipsis icon to show actions the user can take on a specific table row, for example, emailing the invoice.

## Contents

- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Related Components](#related-components)
- [Examples](#examples)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

To use action popover, import `ActionPopover` alongside `ActionPopoverItem` and the other components that you would like to use in relation,
to the action popover.

```javascript
import {
  ActionPopover,
  ActionPopoverDivider,
  ActionPopoverItem,
  ActionPopoverMenu,
  ActionPopoverMenuButton,
} from "carbon-react/lib/components/action-popover";
```

## Designer Notes

- Action Popovers only perform commands - they aren’t used to collect data, or choose between data items as in a form.
- Place the most common and useful actions within them. Although designs for separator rows and sub-menus are provided,
  these add complexity, so use them sparingly.
- Clicking the table row or tile links the user to that item. Only clicking the Action Popover's icon displays its items.
- Action popovers appear in front of all other UI elements.
- If they are in a position to be cut off by the browser or screen’s edge, the Action Popover can instead appear to the
  left, right, or above the element that generates it.
- Content in the popover is usually left aligned.

## Related Components

- Data entry rather than an action? <LinkTo kind='Select' story='default-story'>Try Select</LinkTo>.
- Only a single action? <LinkTo kind='Button' story='primary'>Try Button</LinkTo>.
- Doesn’t relate to a single table row or tile? <LinkTo kind='Split Button' story='default'>Try Split Button</LinkTo>, or
  <LinkTo kind="Multi Action Button" story="default">
    Multi Action Button
  </LinkTo>
  .

## Examples

### Default

Story showing most of the functionality of the action popover and what can be achieved by using it

<Canvas>
  <Story id="action-popover-test--default" />
</Canvas>

### With icons

Each item is clickable and represents an action to be taken on a given row.

<Canvas>
  <Story name="with icons">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem icon="email" onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With disabled item

ActionPopoverItem&apos;s can be disabled and will not dispatch an action but can still be navigated with the keyboard.

<Canvas>
  <Story name="with disabled item">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem icon="email" disabled onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With menu right aligned

It is possible to align the Menu to the right of the MenuButton by passing the &quot;rightAlignMenu&quot; to ActionPopover

<Canvas>
  <Story name="with menu right aligned">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover rightAlignMenu>
                <ActionPopoverItem icon="email" disabled onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With item content aligned to right

<Canvas>
  <Story name="with item content aligned to right">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover horizontalAlignment="right">
                <ActionPopoverItem icon="email">
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem icon="delete">Delete</ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With no icons

Menu items can also be displayed without icons.

<Canvas>
  <Story name="with no icons">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}}>Delete</ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With custom menu button

It is possible to use the `renderButton` prop to override the default button used to trigger the opening and closing of
ActionPopoverMenu. Expand the code example below for how to use this.

<Canvas>
  <Story name="with custom menu button">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover
                renderButton={({
                  tabIndex,
                  "data-element": dataElement,
                  ariaAttributes,
                }) => (
                  <ActionPopoverMenuButton
                    buttonType="tertiary"
                    iconType="dropdown"
                    iconPosition="after"
                    size="small"
                    tabIndex={tabIndex}
                    data-element={dataElement}
                    {...ariaAttributes}
                  >
                    More
                  </ActionPopoverMenuButton>
                )}
              >
                <ActionPopoverItem icon="email" onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover
                renderButton={({
                  "data-element": dataElement,
                  ariaAttributes,
                }) => (
                  <Link
                    onClick={() => {}}
                    tabbable={false}
                    data-element={dataElement}
                    {...ariaAttributes}
                  >
                    More
                  </Link>
                )}
              >
                <ActionPopoverItem icon="email" onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With submenu

A menu item can be passed a sub-menu to add further sub-actions if needed. items with sub-menus will display an chevron
icons pointing in the direction that the sub-menu will open; by default it will open to the left.

Hovering the mouse cursor over an item will open the sub-menu if it has one and moving the mouse cursor away will
close it. No action is dispatched on click of the item and the sub-menu is opened by mouse enter and closed on mouse
leave.

<Canvas>
  <Story name="with submenu">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem
                  icon="print"
                  onClick={() => {}}
                  submenu={
                    <ActionPopoverMenu>
                      <ActionPopoverItem onClick={() => {}}>
                        CSV
                      </ActionPopoverItem>
                      <ActionPopoverItem onClick={() => {}}>
                        PDF
                      </ActionPopoverItem>
                    </ActionPopoverMenu>
                  }
                >
                  Print
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With disabled submenu

A sub-menu will not open if the item is in a disabled state.

<Canvas>
  <Story name="with disabled submenu">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem
                  disabled
                  icon="print"
                  onClick={() => {}}
                  submenu={
                    <ActionPopoverMenu>
                      <ActionPopoverItem onClick={() => {}}>
                        CSV
                      </ActionPopoverItem>
                      <ActionPopoverItem onClick={() => {}}>
                        PDF
                      </ActionPopoverItem>
                    </ActionPopoverMenu>
                  }
                >
                  Print
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### With submenu aligned right

The sub-menu will open to the right side when there is no space to render the sub-menu to the left.

<Story
  name="with submenu aligned right"
  parameters={{ docs: { disable: true } }}
>
  <div style={{ height: "250px" }}>
    <FlatTable>
      <FlatTableHead>
        <FlatTableRow>
          <FlatTableHeader>&nbsp;</FlatTableHeader>
          <FlatTableHeader>First Name</FlatTableHeader>
          <FlatTableHeader>Last Name</FlatTableHeader>
        </FlatTableRow>
      </FlatTableHead>
      <FlatTableBody>
        <FlatTableRow>
          <FlatTableCell>
            <ActionPopover>
              <ActionPopoverItem
                icon="print"
                onClick={() => {}}
                submenu={
                  <ActionPopoverMenu>
                    <ActionPopoverItem icon="csv" onClick={() => {}}>
                      CSV
                    </ActionPopoverItem>
                    <ActionPopoverItem icon="pdf" onClick={() => {}}>
                      PDF
                    </ActionPopoverItem>
                  </ActionPopoverMenu>
                }
              >
                Print
              </ActionPopoverItem>
              <ActionPopoverDivider />
              <ActionPopoverItem onClick={() => {}} icon="delete">
                Delete
              </ActionPopoverItem>
            </ActionPopover>
          </FlatTableCell>
          <FlatTableCell>John</FlatTableCell>
          <FlatTableCell>Doe</FlatTableCell>
        </FlatTableRow>
      </FlatTableBody>
    </FlatTable>
  </div>
</Story>

<MyPreview>
  <DocsWrapper
    src="iframe.html?id=action-popover--with-submenu-aligned-right"
    height="250px"
  />
</MyPreview>

### With menu opening above

The menu can also be rendered above the button control by setting using `placement="top"`.

<Canvas>
  <Story name="with menu opening above">
    <div style={{ paddingTop: "120px", height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover placement="top">
                <ActionPopoverItem
                  icon="print"
                  onClick={() => {}}
                  submenu={
                    <ActionPopoverMenu>
                      <ActionPopoverItem onClick={() => {}}>
                        CSV
                      </ActionPopoverItem>
                      <ActionPopoverItem onClick={() => {}}>
                        PDF
                      </ActionPopoverItem>
                    </ActionPopoverMenu>
                  }
                >
                  Print
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### Keyboard navigation

ActionPopover and ActionPopoverItem have extensive keyboard support. It is possible to open the menu when the
ActionPopover is focused: pressing either the "enter" or "down" key will open the menu and focus the first item;
pressing the "up" key when the button is focused will open the menu and focus the last element.

Once the menu is open, it is possible to navigate the items using the "up" and "down" arrow keys. Alpha keys can also
be used as shortcuts to navigate the items: pressing a-z selects the next item in the list starting with that letter,
wrapping around to the start if required. Pressing an alpha key which doesn't match any items in the menu list will
result leave the focus on the current item.

Pressing the "enter" key will trigger the action associated with the currently focused item. Pressing either the "esc"
or "tab" key will close the menu with no action being triggered and focus the next focusable element. Pressing
"shift + tab" will close the menu and focus the previously focused element.

<Canvas>
  <Story name="keyboard navigation">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem icon="email" onClick={() => {}}>
                  Email Invoice
                </ActionPopoverItem>
                <ActionPopoverItem disabled icon="csv" onClick={() => {}}>
                  Download CSV
                </ActionPopoverItem>
                <ActionPopoverItem icon="pdf" onClick={() => {}}>
                  Download PDF
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### Keyboard navigation left aligned submenu

Sub-menus can be accessed via the keyboard as well, when the sub-menu is left aligned it can be opened by navigating to
the parent item and pressing the "left" key. The same accessible shortcuts described above can then be used to navigate
the sub-menu. Pressing the "right" key will return focus back to the main menu and close the sub-menu without
triggering an action.

<Canvas>
  <Story name="keyboard navigation left aligned submenu">
    <div style={{ height: "250px" }}>
      <FlatTable>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader>First Name</FlatTableHeader>
            <FlatTableHeader>Last Name</FlatTableHeader>
            <FlatTableHeader>&nbsp;</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>John</FlatTableCell>
            <FlatTableCell>Doe</FlatTableCell>
            <FlatTableCell>
              <ActionPopover>
                <ActionPopoverItem
                  icon="csv"
                  onClick={() => {}}
                  submenu={
                    <ActionPopoverMenu>
                      <ActionPopoverItem icon="csv" onClick={() => {}}>
                        CSV
                      </ActionPopoverItem>
                      <ActionPopoverItem icon="pdf" onClick={() => {}}>
                        PDF
                      </ActionPopoverItem>
                    </ActionPopoverMenu>
                  }
                >
                  Download
                </ActionPopoverItem>
                <ActionPopoverItem
                  icon="pdf"
                  onClick={() => {}}
                  submenu={
                    <ActionPopoverMenu>
                      <ActionPopoverItem icon="csv" onClick={() => {}}>
                        CSV
                      </ActionPopoverItem>
                      <ActionPopoverItem icon="pdf" onClick={() => {}}>
                        PDF
                      </ActionPopoverItem>
                    </ActionPopoverMenu>
                  }
                >
                  Print
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}} icon="delete">
                  Delete
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

### Keyboard navigation right aligned submenu

When sub-menus aligns to the right hand side, the key shortcuts are switiched: pressingt the "right" key whilst focus
is on a item will open a sub-menu if it has one and pressing the "left" key will close it.

<Story
  name="keyboard navigation right aligned submenu"
  parameters={{ docs: { disable: true } }}
>
  <div style={{ height: "250px" }}>
    <FlatTable>
      <FlatTableHead>
        <FlatTableRow>
          <FlatTableHeader>&nbsp;</FlatTableHeader>
          <FlatTableHeader>First Name</FlatTableHeader>
          <FlatTableHeader>Last Name</FlatTableHeader>
        </FlatTableRow>
      </FlatTableHead>
      <FlatTableBody>
        <FlatTableRow>
          <FlatTableCell>
            <ActionPopover>
              <ActionPopoverItem
                icon="csv"
                onClick={() => {}}
                submenu={
                  <ActionPopoverMenu>
                    <ActionPopoverItem icon="csv" onClick={() => {}}>
                      CSV
                    </ActionPopoverItem>
                    <ActionPopoverItem icon="pdf" onClick={() => {}}>
                      PDF
                    </ActionPopoverItem>
                  </ActionPopoverMenu>
                }
              >
                Download
              </ActionPopoverItem>
              <ActionPopoverItem
                icon="pdf"
                onClick={() => {}}
                submenu={
                  <ActionPopoverMenu>
                    <ActionPopoverItem icon="csv" onClick={() => {}}>
                      CSV
                    </ActionPopoverItem>
                    <ActionPopoverItem icon="pdf" onClick={() => {}}>
                      PDF
                    </ActionPopoverItem>
                  </ActionPopoverMenu>
                }
              >
                Print
              </ActionPopoverItem>
              <ActionPopoverDivider />
              <ActionPopoverItem onClick={() => {}} icon="delete">
                Delete
              </ActionPopoverItem>
            </ActionPopover>
          </FlatTableCell>
          <FlatTableCell>John</FlatTableCell>
          <FlatTableCell>Doe</FlatTableCell>
        </FlatTableRow>
      </FlatTableBody>
    </FlatTable>
  </div>
</Story>

<MyPreview>
  <DocsWrapper
    src="iframe.html?id=action-popover--keyboard-access-right-aligned-submenu"
    height="250px"
  />
</MyPreview>

### With additional options

When a row has many actions you may choose to incldue the primary actions with a dedicated action to for less frequently
used actions, in this example "manage devices".

<Canvas>
  <Story name="with additional options">
    <div style={{ marginTop: "40px", height: "275px", maxWidth: "800px" }}>
      <FlatTable isZebra>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader colSpan="3">Devices</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>Mobile Phone</FlatTableCell>
            <FlatTableCell>Online</FlatTableCell>
            <FlatTableCell>
              <ActionPopover rightAlignMenu>
                <ActionPopoverItem onClick={() => {}}>
                  Enroll Device
                </ActionPopoverItem>
                <ActionPopoverItem onClick={() => {}}>
                  Assign Owner
                </ActionPopoverItem>
                <ActionPopoverDivider />
                <ActionPopoverItem onClick={() => {}}>
                  Manage Devices
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

## with download button

<Canvas>
  <Story name="with download button">
    <div style={{ marginTop: "40px", height: "275px", maxWidth: "800px" }}>
      <FlatTable isZebra>
        <FlatTableHead>
          <FlatTableRow>
            <FlatTableHeader colSpan="3">Devices</FlatTableHeader>
          </FlatTableRow>
        </FlatTableHead>
        <FlatTableBody>
          <FlatTableRow>
            <FlatTableCell>Mobile Phone</FlatTableCell>
            <FlatTableCell>Online</FlatTableCell>
            <FlatTableCell>
              <ActionPopover rightAlignMenu>
                <ActionPopoverItem
                  download
                  icon="download"
                  href={"example-img.jpg"}
                >
                  Download
                </ActionPopoverItem>
                <ActionPopoverItem icon="settings" onClick={() => {}}>
                  Assign Owner
                </ActionPopoverItem>
                <ActionPopoverItem
                  disabled
                  icon="download"
                  href={"example-img.jpg"}
                >
                  Download
                </ActionPopoverItem>
              </ActionPopover>
            </FlatTableCell>
          </FlatTableRow>
        </FlatTableBody>
      </FlatTable>
    </div>
  </Story>
</Canvas>

## in overflow hidden container

<Canvas>
  <Story name="in overflow hidden container">
    <div style={{ marginTop: "40px", height: "275px", maxWidth: "800px" }}>
      <Accordion title="Heading">
        <FlatTable isZebra>
          <FlatTableHead>
            <FlatTableRow>
              <FlatTableHeader colSpan="3">Devices</FlatTableHeader>
            </FlatTableRow>
          </FlatTableHead>
          <FlatTableBody>
            <FlatTableRow>
              <FlatTableCell>Mobile Phone</FlatTableCell>
              <FlatTableCell>Online</FlatTableCell>
              <FlatTableCell>
                <ActionPopover>
                  <ActionPopoverItem onClick={() => {}}>
                    Enroll Device
                  </ActionPopoverItem>
                  <ActionPopoverItem onClick={() => {}}>
                    Assign Owner
                  </ActionPopoverItem>
                  <ActionPopoverDivider />
                  <ActionPopoverItem onClick={() => {}}>
                    Manage Devices
                  </ActionPopoverItem>
                </ActionPopover>
              </FlatTableCell>
            </FlatTableRow>
            <FlatTableRow>
              <FlatTableCell>Tablet</FlatTableCell>
              <FlatTableCell>Online</FlatTableCell>
              <FlatTableCell>
                <ActionPopover>
                  <ActionPopoverItem onClick={() => {}}>
                    Enroll Device
                  </ActionPopoverItem>
                  <ActionPopoverItem onClick={() => {}}>
                    Assign Owner
                  </ActionPopoverItem>
                  <ActionPopoverDivider />
                  <ActionPopoverItem onClick={() => {}}>
                    Manage Devices
                  </ActionPopoverItem>
                </ActionPopover>
              </FlatTableCell>
            </FlatTableRow>
            <FlatTableRow>
              <FlatTableCell>Desktop</FlatTableCell>
              <FlatTableCell>Online</FlatTableCell>
              <FlatTableCell>
                <ActionPopover>
                  <ActionPopoverItem onClick={() => {}}>
                    Enroll Device
                  </ActionPopoverItem>
                  <ActionPopoverItem onClick={() => {}}>
                    Assign Owner
                  </ActionPopoverItem>
                  <ActionPopoverDivider />
                  <ActionPopoverItem onClick={() => {}}>
                    Manage Devices
                  </ActionPopoverItem>
                </ActionPopover>
              </FlatTableCell>
            </FlatTableRow>
          </FlatTableBody>
        </FlatTable>
      </Accordion>
    </div>
  </Story>
</Canvas>

## In FlatTable with highlightable rows

It is possible to utilise the selected and onClick props on the FlatTableRow to highlight single rows of data.

<Canvas>
  <Story name="in FlatTable" parameters={{ chromatic: { disable: true } }}>
    {() => {
      const [highlightedRow, setHighlightedRow] = useState("");
      const handleHighlightRow = (id) => {
        setHighlightedRow(id);
      };
      return (
        <div style={{ paddingTop: "120px", height: "250px" }}>
          <FlatTable>
            <FlatTableHead>
              <FlatTableRow>
                <FlatTableHeader>Name</FlatTableHeader>
                <FlatTableHeader>Location</FlatTableHeader>
                <FlatTableHeader>Relationship Status</FlatTableHeader>
                <FlatTableHeader>Dependents</FlatTableHeader>
              </FlatTableRow>
            </FlatTableHead>
            <FlatTableBody>
              <FlatTableRow
                onClick={() => handleHighlightRow("one")}
                highlighted={highlightedRow === "one"}
              >
                <FlatTableCell>John Doe</FlatTableCell>
                <FlatTableCell>London</FlatTableCell>
                <FlatTableCell>Single</FlatTableCell>
                <FlatTableCell>
                  <ActionPopover
                    placement="top"
                    onOpen={() => handleHighlightRow("one")}
                  >
                    <ActionPopoverItem
                      icon="print"
                      onClick={() => {}}
                      submenu={
                        <ActionPopoverMenu>
                          <ActionPopoverItem onClick={() => {}}>
                            CSV
                          </ActionPopoverItem>
                          <ActionPopoverItem onClick={() => {}}>
                            PDF
                          </ActionPopoverItem>
                        </ActionPopoverMenu>
                      }
                    >
                      Print
                    </ActionPopoverItem>
                    <ActionPopoverDivider />
                    <ActionPopoverItem onClick={() => {}} icon="delete">
                      Delete
                    </ActionPopoverItem>
                  </ActionPopover>
                </FlatTableCell>
              </FlatTableRow>
              <FlatTableRow
                onClick={() => handleHighlightRow("two")}
                highlighted={highlightedRow === "two"}
              >
                <FlatTableCell>Jane Doe</FlatTableCell>
                <FlatTableCell>York</FlatTableCell>
                <FlatTableCell>Married</FlatTableCell>
                <FlatTableCell>
                  <ActionPopover
                    placement="top"
                    onOpen={() => handleHighlightRow("two")}
                  >
                    <ActionPopoverItem
                      icon="print"
                      onClick={() => {}}
                      submenu={
                        <ActionPopoverMenu>
                          <ActionPopoverItem onClick={() => {}}>
                            CSV
                          </ActionPopoverItem>
                          <ActionPopoverItem onClick={() => {}}>
                            PDF
                          </ActionPopoverItem>
                        </ActionPopoverMenu>
                      }
                    >
                      Print
                    </ActionPopoverItem>
                    <ActionPopoverDivider />
                    <ActionPopoverItem onClick={() => {}} icon="delete">
                      Delete
                    </ActionPopoverItem>
                  </ActionPopover>
                </FlatTableCell>
              </FlatTableRow>
            </FlatTableBody>
          </FlatTable>
        </div>
      );
    }}
  </Story>
</Canvas>

## Props

### ActionPopover Props

<StyledSystemProps of={ActionPopover} margin noHeader />

### ActionPopoverMenu Props

<ArgsTable of={ActionPopoverMenu} />

### ActionPopoverItem Props

<ArgsTable of={MenuItem} />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object
to the [i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "actionPopover.ariaLabel",
      description: "The text for the aria-label attribute",
      type: "func",
      returnType: "string",
    },
  ]}
/>
