import { useState } from "react";
import { Meta, Story, Preview } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";

import Textarea from ".";
import { OriginalTextarea } from "./textarea.component";
import Box from "../box";

<Meta title="Textarea" parameters={{ info: { disable: true } }} />

# Textarea

- Useful for collecting a significant amount of text (e.g. notes about clients, or a short email message).
- If content in a textarea is read-only, remove the field border so it appears as static text.
- Use placeholder text to give the user context or examples of what to write.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Textarea from "carbon-react/lib/components/textarea";
```

## Examples

### Default

<Preview>
  <Story name="default">
    {() => {
      const [state, setState] = useState("");
      const setValue = ({ target }) => {
        setState(target.value);
      };
      return <Textarea label="Textarea" value={state} onChange={setValue} />;
    }}
  </Story>
</Preview>

### Disabled

<Preview>
  <Story name="disabled">
    <Textarea label="Textarea" disabled />
  </Story>
</Preview>

### Label Align

<Preview>
  <Story name="label Align">
    {() =>
      ["right", "left"].map((alignment) => (
        <Textarea
          label="Textarea"
          labelInline
          inputWidth={50}
          key={alignment}
          labelAlign={alignment}
        />
      ))
    }
  </Story>
</Preview>

### ReadOnly

<Preview>
  <Story name="readOnly">
    <Textarea label="Textarea" readOnly />
  </Story>
</Preview>

### AutoFocus

<Preview>
  <Story name="autoFocus" parameters={{ chromatic: { disable: true } }}>
    <Textarea label="Textarea" autoFocus />
  </Story>
</Preview>

### Expandable

<Preview>
  <Story name="expandable" parameters={{ chromatic: { disable: true } }}>
    {() => {
      const [value, setValue] = useState("");
      return (
        <Textarea
          label="Textarea"
          expandable
          value={value}
          onChange={({ target }) => setValue(target.value)}
        />
      );
    }}
  </Story>
</Preview>

### With characterLimit

<Preview>
  <Story name="with characterLimit">
    {() => {
      const [value, setValue] = useState("");
      return (
        <Textarea
          label="Textarea"
          expandable
          value={value}
          onChange={({ target }) => setValue(target.value)}
          characterLimit="50"
        />
      );
    }}
  </Story>
</Preview>

### With characterLimit - not enforced

<Preview>
  <Story
    name="with characterLimit - not enforced"
    parameters={{ chromatic: { disable: true } }}
  >
    {() => {
      const [value, setValue] = useState("");
      return (
        <Textarea
          label="Textarea"
          expandable
          value={value}
          onChange={({ target }) => setValue(target.value)}
          characterLimit="50"
          enforceCharacterLimit={false}
          warnOverLimit
        />
      );
    }}
  </Story>
</Preview>

### With labelInline

<Preview>
  <Story name="with labelInline">
    <Textarea label="Textarea" labelInline />
  </Story>
</Preview>

### With custom labelWidth and inputWidth

<Preview>
  <Story name="with custom labelWidth and inputWidth">
    <Textarea label="Textarea" labelInline labelWidth={50} inputWidth={50} />
  </Story>
</Preview>

### With fieldHelp

<Preview>
  <Story name="with fieldHelp">
    <Textarea label="Textarea" fieldHelp="Help" />
  </Story>
</Preview>

### With labelHelp

<Preview>
  <Story name="with labelHelp">
    <Textarea label="Textarea" labelHelp="Help" helpAriaLabel="Help" />
  </Story>
</Preview>

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Preview>
  <Story name="required">
    <Textarea label="Textarea" required />
  </Story>
</Preview>

### Validations

Validation status can be set by passing `error`, `warning` or `info` prop to the component

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Preview>
  <Story name="validations - string - component">
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <Textarea
            label="Textarea"
            {...{ [validationType]: "Message" }}
            mb={2}
          />
          <Textarea
            label="Textarea - readOnly"
            readOnly
            {...{ [validationType]: "Message" }}
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Preview>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Preview>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    parameters={{ chromatic: { disable: true } }}
  >
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <Textarea
            label="Textarea"
            {...{ [validationType]: "Message" }}
            mb={2}
            tooltipPosition="bottom"
          />
        </div>
      ))
    }
  </Story>
</Preview>

#### As a string, displayed on label

<Preview>
  <Story name="validations - string - label">
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-label`}>
          <Textarea
            label="Textarea"
            validationOnLabel
            {...{ [validationType]: "Message" }}
            mb={2}
          />
          <Textarea
            label="Textarea - readOnly"
            validationOnLabel
            readOnly
            {...{ [validationType]: "Message" }}
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Preview>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Preview>
  <Story
    name="validations - string - with tooltipPosition overriden - label"
    parameters={{ chromatic: { disable: true } }}
  >
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-label`}>
          <Textarea
            label="Textarea"
            validationOnLabel
            {...{ [validationType]: "Message" }}
            mb={2}
            tooltipPosition="top"
          />
        </div>
      ))
    }
  </Story>
</Preview>

#### As a boolean

<Preview>
  <Story name="validations - boolean">
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-boolean-component`}>
          <Textarea label="Textarea" {...{ [validationType]: true }} mb={2} />
          <Textarea
            label="Textarea - readOnly"
            readOnly
            {...{ [validationType]: true }}
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Preview>

## Props

### Textarea

<StyledSystemProps of={OriginalTextarea} noHeader margin />

**Any other supplied props will be provided to the underlying HTML input element**
