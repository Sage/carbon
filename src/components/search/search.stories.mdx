import { Meta, Story, Canvas } from "@storybook/addon-docs";
import { useState } from "react";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import Search from ".";
import Button from "../button";
import Box from "../box";

<Meta title="Search" />

# Search

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/64709e-search"
  style={{ color: '#007E45', fontWeight: 'bold', textDecoration: 'underline' }}
>
  Product Design System component 
</a>

This search component should be used if you require the user to conduct a search.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

Import `Search` into the project.

```javascript
import Search from "carbon-react/lib/components/search";
```

## Examples

### Search without Search Button and default width

<Canvas>
  <Story name="default" parameters={{ info: { disable: true } }}>
    <Search placeholder="Search..." defaultValue="" />
  </Story>
</Canvas>

### Search can be controlled

<Canvas>
  <Story name="controlled" parameters={{ info: { disable: true } }}>
    {() => {
      const [value, setValue] = useState("");
      return (
        <div>
          <Button onClick={() => setValue("")}>Clear value</Button>
          <Button onClick={() => setValue("test value")} ml={2}>
            Set value
          </Button>
          <Search
            id="test"
            name="test"
            placeholder="Search..."
            onChange={(e) => setValue(e.target.value)}
            value={value}
            searchButton
          />
        </div>
      );
    }}
  </Story>
</Canvas>

### Search with Search Button and default width

<Canvas>
  <Story name="with SearchButton" parameters={{ info: { disable: true } }}>
    <Search defaultValue="Here is some text" searchButton />
  </Story>
</Canvas>

### Search without Search Button, default width and colour background

<Canvas style={{ backgroundColor: "#e6ebed" }}>
  <Story
    name="default with colour background"
    parameters={{ info: { disable: true }, chromatic: { disable: true } }}
  >
    <Search placeholder="Search..." defaultValue="" />
  </Story>
</Canvas>

### Search with Search Button, default width and colour background

<Canvas style={{ backgroundColor: "#e6ebed" }}>
  <Story
    name="with SearchButton and colour background"
    parameters={{ info: { disable: true }, chromatic: { disable: true } }}
  >
    <Search
      placeholder="Search..."
      defaultValue="Here is some text"
      searchButton
    />
  </Story>
</Canvas>

### Search without Search Button and custom width

In this example the `searchWidth` prop is 375px.

<Canvas>
  <Story name="custom Width using px" parameters={{ info: { disable: true } }}>
    <Search placeholder="Search..." defaultValue="" searchWidth="375px" />
  </Story>
</Canvas>

### Search with Search Button and custom width

In this example the `searchWidth` prop is 375px.

<Canvas>
  <Story
    name="with SearchButton and Custom Width using px"
    parameters={{ info: { disable: true } }}
  >
    <Search defaultValue="Here is some text" searchButton searchWidth="375px" />
  </Story>
</Canvas>

### Search without Search Button and custom width

In this example the `searchWidth` prop is 70%.

<Canvas>
  <Story name="custom Width using %" parameters={{ info: { disable: true } }}>
    <Search placeholder="Search..." defaultValue="" searchWidth="70%" />
  </Story>
</Canvas>

### Search with Search Button and custom width

In this example the `searchWidth` prop is 70%.

<Canvas>
  <Story
    name="with SearchButton and Custom Width using %"
    parameters={{ info: { disable: true } }}
  >
    <Search defaultValue="Here is some text" searchButton searchWidth="70%" />
  </Story>
</Canvas>

### With custom maxWidth

In this example the `maxWidth` prop is 50%.

<Canvas>
  <Story 
    name="with custom maxWidth"
    parameters={{ info: { disable: true } }}
  >
    <Search defaultValue="Here is some text" searchButton maxWidth="50%" />
  </Story>
</Canvas>

### Search with Alternative Styling

In this example the `variant` prop is "dark" and `searchButton` is true.

<Canvas>
  <Story name="with Alt Styling" parameters={{ info: { disable: true } }}>
    <Box width="700px" height="108px">
      <div style={{ padding: "32px", backgroundColor: "#003349" }}>
        <Search
          placeholder="Search..."
          defaultValue="Here is some text"
          searchButton
          variant="dark"
        />
      </div>
    </Box>
  </Story>
</Canvas>

### Search with Alternative Styling and No Button

In this example the `variant` prop is "dark" and no search button is present.

<Canvas>
  <Story
    name="with Alt Styling and no button"
    parameters={{ info: { disable: true } }}
  >
    <Box width="700px" height="108px">
      <div style={{ padding: "32px", backgroundColor: "#003349" }}>
        <Search placeholder="Search..." defaultValue="" variant="dark" />
      </div>
    </Box>
  </Story>
</Canvas>

### Validations

Validation status can be set by passing `error`, `warning` or `info` prop to the component

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Canvas>
  <Story name="validations - string - component">
    {() => {
      const [state, setState] = useState({
        error: "<foo>",
        warning: "<foo>",
        info: "<foo>",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <Search
            label="Search"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            searchButton
            {...{ [validationType]: "Invalid characters" }}
          />
        </div>
      ));
    }}
  </Story>
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    parameters={{ chromatic: { disable: true } }}
  >
    {() => {
      const [state, setState] = useState({
        error: "<foo>",
        warning: "<foo>",
        info: "<foo>",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <Search
            label="Search"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            searchButton
            {...{ [validationType]: "Invalid characters" }}
            tooltipPosition="bottom"
          />
        </div>
      ));
    }}
  </Story>
</Canvas>

#### As a boolean

<Canvas>
  <Story name="validations - boolean">
    {() => {
      const [state, setState] = useState({
        error: "<foo>",
        warning: "<foo>",
        info: "<foo>",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-boolean-component`}>
          <Search
            label="Search"
            value={state[validationType]}
            searchButton
            onChange={handleChange(validationType)}
            {...{ [validationType]: true }}
          />
        </div>
      ));
    }}
  </Story>
</Canvas>

## Props

### Search

<StyledSystemProps of={Search} noHeader margin />
