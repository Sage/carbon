import { useState } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';

import Confirm from '.';
import Button from '../button';

<Meta
  title="Confirm"
  parameters={{ info: { disable: true }}}
/>

# Confirm
Confirms or cancels an action.

## Contents
- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Related Components](#related-components)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Confirm from "carbon-react/lib/components/confirm";
```

## Designer Notes
Shows a static message in a dialog which asks the user to confirm or cancel an action theyâ€™ve initiated.

Useful to confirm actions which may be difficult to undo, or potentially harmful.

Include a Message component within the Alert component (a warning Message component may be particularly useful for a potentially harmful choice), use plain text, or apply a standard Carbon Error or Warning icon.

This component has the same options and properties as the Dialog component.

A good example could be confirming deletion of a large number of records.

## Related Components
- Longer message which stays on-screen? [Try Message](/?path=/docs/message--default-story "Message").
- Longer, time sensitive message that must be dismissed? [Try Toast](/?path=/docs/design-system-toast--default-story "Toast").
- Error or warning message that interrupts activity? [Try Alert](/?path=/docs/alert--default-story "Alert").
- Simple task in context? [Try Dialog](/?path=/docs/dialog--default-story "Dialog").

## Examples

### Default

<Preview>
  <Story name="default" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
            onCancel={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>


### Single action

<Preview>
  <Story name="single action" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>


### Destructive buttons

<Preview>
  <Story name="destructive" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            destructive
            cancelButtonType="tertiary"
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
            onCancel={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>

### Disable confirm button

<Preview>
  <Story name="disableConfirm" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            destructive
            disableConfirm
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
            onCancel={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>

### Disable cancel button

<Preview>
  <Story name="disableCancel" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            showCloseIcon
            disableCancel
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
            onCancel={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>

### Change cancel button type
Allows to set variant which is supported in `<Button />` and it will be applied to the `cancel` button

<Preview>
  <Story name="cancelButtonType" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            cancelButtonType="tertiary"
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
            onCancel={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>

### Confirm button loading

<Preview>
  <Story name="isLoadingConfirm" parameters={{ chromatic: { disable: true }}}>
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      return (
        <>
          <Button onClick={ () => setIsOpen(!isOpen) }>
            Open Confirm
          </Button>
          <Confirm
            title="Are you sure?"
            subtitle="Subtitle"
            isLoadingConfirm
            open={ isOpen }
            onConfirm={ () => setIsOpen(false) }
            onCancel={ () => setIsOpen(false) }
          >
            Content
          </Confirm>
        </>
      )
    }}
  </Story>
</Preview>

## Props

### Confirm

<Props of={Confirm} />
