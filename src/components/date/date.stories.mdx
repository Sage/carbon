import { useState } from "react";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";
import * as stories from "./date.stories";
import DateInput from "./date.component";
import Textbox from "../textbox";

<Meta title="Date Input" parameters={{ info: { disable: true } }} />

# Date

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/11ef00-date-picker"
  style={{ color: '#007E45', fontWeight: 'bold', textDecoration: 'underline' }}
>
  Product Design System component 
</a>

- If the date is likely to be close to today (e.g. an invoice due date), then a datepicker may be useful. If the date is likely to be far in the past (e.g. a date of birth), then it may be better to use separate inputs for day, month, and year or use a NumeralDate component.
- Field focus automatically opens the datepicker, but a user can key in dates too, which many users find more convenient, especially in financial applications.
- Carbon handles a range of formats, like dd/mm/yyyy, dd/mm/yy, dd/mm, or dd. Configuration can be regional, and copes with space, slash, full stop, comma and colon as separators, as well as no separator at all.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

```javascript
import DateInput from "carbon-react/lib/components/date";
```

## Examples

### Default

The `value` and `onChange` props are required as this component must be controlled. The `onChange` will receive a event
with a target value containing a `formattedValue` and `rawValue`. The `rawValue` should be used for storing the value
in the backend and for running validations: it will either return a valid ISO string or null. The `formattedValue` should
be used to set the input value like in the example below, although the component can be initialised with an ISO formatted string.

<Canvas>
  <Story name="default" story={stories.Default} />
</Canvas>

### Sizes

<Canvas>
  <Story name="sizes" story={stories.Sizes} />
</Canvas>

### AutoFocus

<Canvas>
  <Story name="autoFocus" story={stories.AutoFocus} />
</Canvas>

### Disabled

<Canvas>
  <Story name="disabled" story={stories.Disabled} />
</Canvas>

### ReadOnly

<Canvas>
  <Story name="readOnly" story={stories.ReadOnly} />
</Canvas>

### Empty

<Canvas>
  <Story name="empty" story={stories.Empty} />
</Canvas>

### With labelInline

<Canvas>
  <Story name="with labelInline" story={stories.WithLabelInline} />
</Canvas>

### With custom width

<Canvas>
  <Story name="with custom width" story={stories.WithCustomWidth} />
</Canvas>

### With fieldHelp

<Canvas>
  <Story name="with fieldHelp" story={stories.WithFieldHelp} />
</Canvas>

### With labelHelp

<Canvas>
  <Story name="with labelHelp" story={stories.WithLabelHelp} />
</Canvas>

### With disabled portal

<Canvas>
  <Story name="with disabled portal" story={stories.WithDisabledPortal} />
</Canvas>

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Canvas>
  <Story name="required" story={stories.Required} />
</Canvas>

### Validations

Validation status can be set by passing `error`, `warning` or `info` prop to the component

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Canvas>
  <Story name="validations - string - component" story={stories.ValidationsStringComponent} />
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    story={stories.ValidationsStringWithTooltipPositionOverriddenComponent}
  />
</Canvas>

#### As a string, displayed on label

<Canvas>
  <Story name="validations - string - label" story={stories.ValidationsStringLabel} />
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - label"
    story={stories.ValidationsStringWithTooltipPositionOverriddenLabel}
  />
</Canvas>

#### New designs validation

<Canvas>
  <Story name="validations - string - new design" story={stories.ValidationsStringNewDesign} />
</Canvas>

#### As a boolean

<Canvas>
  <Story name="validations - boolean" story={stories.ValidationsBoolean} />
</Canvas>

#### Example implementation

The example below will display an error if an invalid date or a date with a year value less than 2020 is passed to the input.

<Canvas>
  <Story
    name="validations - example implementation"
    story={stories.ValidationsExampleImplementation}
  />
</Canvas>

### Locale override

The examples below illustrate how to override the locale passed into the Date component. The first example has been set up for
the German (`de`) locale whilst the second is for a Chinese (`zh-CN`) locale. Required locales can be imported like so `import { de, zhCN } from 'carbon-react/lib/locales/date-fns-locales';`

<Canvas>
  <Story
    name="locale override - example implementation"
    story={stories.LocaleOverrideExampleImplementation}
  />
</Canvas>

## Props

### DateInput

<StyledSystemProps
  of={DateInput}
  noHeader
  margin
  exclude={[
    "onMouseDown",
    "onChangeDeferred",
    "deferTimeout",
    "leftChildren",
    "placeholder",
    "iconOnClick",
    "iconOnMouseDown",
    "characterLimit",
    "prefix",
    "inputIcon",
    "iconTabIndex",
  ]}
  />

**Any other supplied props will be provided to the underlying HTML input element**

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "date.dateFnsLocale",
      description:
        "The locale object from date-fns, example of implementation can be found [here](#locale-override)",
      type: "func",
      returnType: "date-fns locale object",
    },
    {
      name: "date.ariaLabels.previousMonthButton",
      description:
        "Aria label text for the previous month navigation button in the date picker",
      type: "func",
      returnType: "string",
    },
    {
      name: "date.ariaLabels.nextMonthButton",
      description:
        "Aria label text for the next month navigation button in the date picker",
      type: "func",
      returnType: "string",
    }
  ]}
/>
