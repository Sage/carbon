import { Meta, ArgTypes, Canvas } from "@storybook/blocks";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import * as DateStories from "./date.stories";

<Meta of={DateStories} />

# Date

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/11ef00-date-picker"
  style={{ color: "#007E45", fontWeight: "bold", textDecoration: "underline" }}
  rel="noreferrer"
>
  Product Design System component
</a>

- If the date is likely to be close to today (e.g. an invoice due date), then a datepicker may be useful. If the date is likely to be far in the past (e.g. a date of birth), then it may be better to use separate inputs for day, month, and year or use a NumeralDate component.
- Field focus automatically opens the datepicker, but a user can key in dates too, which many users find more convenient, especially in financial applications.
- Carbon handles a range of formats, like dd/mm/yyyy, dd/mm/yy, dd/mm, or dd. Configuration can be regional, and copes with space, slash, full stop, comma and colon as separators, as well as no separator at all.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Validation states](#validation-states)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

```javascript
import DateInput from "carbon-react/lib/components/date";
```

## Examples

### Default

The `value` and `onChange` props are required as this component must be controlled. The `onChange` will receive a event
with a target value containing a `formattedValue` and `rawValue`. The `rawValue` should be used for storing the value
in the backend and for running validations: it will either return a valid ISO string or null. The `formattedValue` should
be used to set the input value like in the example below, although the component can be initialised with an ISO formatted string.

<Canvas of={DateStories.Default} />

### Input Hint

<Canvas of={DateStories.InputHint} />

### Sizes

<Canvas of={DateStories.Sizes} />

### Disabled

<Canvas of={DateStories.Disabled} />

### ReadOnly

<Canvas of={DateStories.ReadOnly} />

### Empty

<Canvas of={DateStories.Empty} />

### With disabled dates

You can configure the available dates by passing a `minDate` and `maxDate` prop to the component.

<Canvas of={DateStories.DisabledDates} />

Another way to disable dates is by passing the `disabled` prop through the `pickerProps` prop directly to the DayPicker. The `disabled` prop accepts either a matcher or an array of [matchers](https://daypicker.dev/api/type-aliases/Matcher#example).

<Canvas of={DateStories.DisabledDatesUsingPickerProps} />

### With custom width

You can use the `maxWidth` prop to set a custom width for the date input, with accepts any valid CSS string.

<Canvas of={DateStories.WithCustomWidth} />

### With disabled portal

<Canvas of={DateStories.WithDisabledPortal} />

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Canvas of={DateStories.Required} />

### Locale override

The examples below illustrate how to override the locale passed into the Date component. The first example has been set up for
the German (`de`) locale whilst the second is for a Chinese (`zh-CN`) locale. 

Required locales can be imported from date-fns like so: `import { de, zhCN } from 'date-fns/locale';`

<Canvas of={DateStories.LocaleOverrideExampleImplementation} />

### Locale format override

You can also override the default date format for a specific locale by passing a `dateFormatOverride` prop to the `DateInput` component or alternatively, 
you can use the `date.dateFormatOverride` translation key. 
The example below demonstrates how you can override the default date format for the German locale (`dd.MM.yyyy`), please note that the prop will take precedence over the translation key.

<Canvas of={DateStories.LocaleFormatOverrideExampleImplementation} />

### With labelInline (legacy)

Use the `labelInline` prop to display the label on the same horizontal row as the input. You can adjust its appearance using the `labelWidth` and
`labelAlign` props to control the width and text alignment of the label and the `inputWidth` prop to control the width of the input.

**Note:** This is a legacy feature and will only render if the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *false*.

<Canvas of={DateStories.WithLabelInline} />

### With fieldHelp (legacy)

**Note:** This is a legacy feature and will only render if the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *false*.

<Canvas of={DateStories.WithFieldHelp} />

### With labelHelp (legacy)

**Note:** This is a legacy feature and will only render if the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *false*.

<Canvas of={DateStories.WithLabelHelp} />

## Validation States

This component supports input validation, see our [Validations](../?path=/docs/documentation-validations--docs) documentation page for more information.

## Props

### DateInput

<ArgTypes
  of={DateStories}
  exclude={[
    "onMouseDown",
    "onChangeDeferred",
    "deferTimeout",
    "leftChildren",
    "placeholder",
    "iconOnClick",
    "iconOnMouseDown",
    "characterLimit",
    "prefix",
    "inputIcon",
    "iconTabIndex",
  ]}
/>

**Any other supplied props will be provided to the underlying HTML input element**

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](../?path=/docs/documentation-i18n--docs).

<TranslationKeysTable
  translationData={[
    {
      name: "date.dateFnsLocale",
      description:
        "The locale object from date-fns, example of implementation can be found [here](#locale-override)",
      type: "func",
      returnType: "date-fns locale object",
    },
    {
      name: "date.ariaLabels.previousMonthButton",
      description:
        "Aria label text for the previous month navigation button in the date picker",
      type: "func",
      returnType: "string",
    },
    {
      name: "date.ariaLabels.nextMonthButton",
      description:
        "Aria label text for the next month navigation button in the date picker",
      type: "func",
      returnType: "string",
    },
    {
      name: "date.dateFormatOverride",
      description:
        "Override the default date format for a specific locale.",
      type: "func",
      returnType: "string",
    },
  ]}
/>
