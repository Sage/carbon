import { useState } from "react";
import { Meta, Story, Preview } from "@storybook/addon-docs";
import { action } from "@storybook/addon-actions";

import specialCharacters from "../../../.storybook/utils/argTypes/specialCharacters";
import { Checkbox } from ".";

<Meta
  title="Checkbox/Test"
  parameters={{
    info: { disable: true },
    chromatic: {
      disable: true,
    },
  }}
  argTypes={{
    labelSpacing: {
      options: [1, 2],
      control: {
        type: "select",
      },
    },
    size: {
      options: ["small", "large"],
      control: {
        type: "select",
      },
    },
    inputWidth: {
      control: {
        type: "range",
        min: 0,
        max: 100,
        step: 1,
      },
    },
    labelWidth: {
      control: {
        type: "range",
        min: 0,
        max: 100,
        step: 1,
      },
    },
    adaptiveSpacingBreakpoint: {
      control: {
        type: "number",
      },
    },
    labelSpecialCharacters: specialCharacters,
    fieldHelpSpecialCharacters: specialCharacters,
    labelHelpSpecialCharacters: specialCharacters,
  }}
/>

export const CheckboxStory = ({
  labelSpecialCharacters,
  label,
  fieldHelpSpecialCharacters,
  fieldHelp,
  labelHelpSpecialCharacters,
  labelHelp,
  ...args
}) => {
  const [isChecked, setIsChecked] = useState(false);
  const handleChange = (ev) => {
    const { checked } = ev.target;
    setIsChecked(checked);
    action("change")(`checked: ${checked}`);
  };
  return (
    <Checkbox
      onChange={handleChange}
      checked={isChecked}
      onBlur={action("onBlur")}
      label={label || labelSpecialCharacters}
      fieldHelp={fieldHelp || fieldHelpSpecialCharacters}
      labelHelp={labelHelp || labelHelpSpecialCharacters}
      helpAriaLabel={labelHelp || labelHelpSpecialCharacters}
      {...args}
    />
  );
};

# Checkbox

### Default

<Preview>
  <Story
    name="default"
    args={{
      key: "",
      label: "Example Checkbox",
      labelSpecialCharacters: undefined,
      autoFocus: false,
      disabled: false,
      fieldHelp: "This text provides help for the input.",
      fieldHelpSpecialCharacters: undefined,
      fieldHelpInline: false,
      reverse: false,
      labelHelp: "This text provides more information for the label.",
      labelHelpSpecialCharacters: undefined,
      inputWidth: 0,
      labelWidth: 0,
      labelSpacing: 1,
      size: "small",
      value: "",
      ml: "0",
      adaptiveSpacingBreakpoint: undefined,
      required: false,
    }}
  >
    {CheckboxStory.bind({})}
  </Story>
</Preview>
