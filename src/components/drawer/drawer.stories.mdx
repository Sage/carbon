import { Meta, Props, Preview, Story } from '@storybook/addon-docs/blocks';
import Drawer from '.';
import { useState, useCallback } from 'react';
import { text } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import {
  FlatTable,
  FlatTableHead,
  FlatTableBody,
  FlatTableRow,
  FlatTableHeader,
  FlatTableCell,
  FlatTableRowHeader
} from '../flat-table'

<Meta title="Design System/Drawer" />

# Drawer
Drawer is a two column layout container.
It is designed to have left hand side container expand and collapse to respectively reveal and hide the content of that container.
Drawer component is designed to fill the space of the element that it is put inside.

```javascript
import Drawer from 'carbon-react/lib/components/drawer';
```

### Uncontrolled usage:

<Preview>
  <Story name="uncontrolled" parameters={{ info: { disable: true }}} >
    return (
      <div style={ { height: '200px' } }>
        <Drawer
          expandedWidth={ text('expandedWidth', '40%') }
          animationDuration={ text('animationDuration', '0.5s') }
          sidebar={ (
            <ul>
              <li>link a</li>
              <li>link b</li>
              <li>link c</li>
            </ul>
          ) }
        >
          content body content body content body content body content body content body content body
        </Drawer>
      </div>
    )
  </Story>
</Preview>

### Custom Sidebar - flattable component as sidebar content:

<Preview>
  <Story name="custom-sidebar" parameters={{ info: { disable: true }}} >
    return (
      <div style={ { height: '200px' } }>
        <Drawer
          expandedWidth={ text('expandedWidth', '20%') }
          animationDuration={ text('animationDuration', '0.5s') }
          sidebar={ (
            <FlatTable>
            <FlatTableHead>
              <FlatTableRow>
                <FlatTableHeader>Client</FlatTableHeader>
                <FlatTableHeader>Client Type</FlatTableHeader>
                <FlatTableHeader>Categories</FlatTableHeader>
                <FlatTableHeader>Services</FlatTableHeader>
                <FlatTableHeader>Client</FlatTableHeader>
                <FlatTableHeader>Client Type</FlatTableHeader>
                <FlatTableHeader>Categories</FlatTableHeader>
                <FlatTableHeader>Services</FlatTableHeader>
              </FlatTableRow>
            </FlatTableHead>
            <FlatTableBody>
              <FlatTableRow>
                <FlatTableCell>John Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group2</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
                <FlatTableCell>John Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group2</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
              </FlatTableRow>
              <FlatTableRow>
                <FlatTableCell>Jane Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group3</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
                <FlatTableCell>Jane Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group3</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
              </FlatTableRow>
              <FlatTableRow>
                <FlatTableCell>John Smith</FlatTableCell>
                <FlatTableCell>Charity</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Payroll</FlatTableCell>
                <FlatTableCell>John Smith</FlatTableCell>
                <FlatTableCell>Charity</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Payroll</FlatTableCell>
              </FlatTableRow>
              <FlatTableRow>
                <FlatTableCell>Jane Smith</FlatTableCell>
                <FlatTableCell>Partnership</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Final Tax</FlatTableCell>
                <FlatTableCell>Jane Smith</FlatTableCell>
                <FlatTableCell>Partnership</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Final Tax</FlatTableCell>
              </FlatTableRow>
            </FlatTableBody>
          </FlatTable>
          ) }
        >
        content body content body content body content body content body content body content body
        </Drawer>
      </div>
    )
  </Story>
</Preview>

### Custom Content - FlatTable component as drawer content:

<Preview>
  <Story name="custom-content" parameters={{ info: { disable: true }}} >
    return (
      <div style={ { height: '200px' } }>
        <Drawer
          expandedWidth={ text('expandedWidth', '20%') }
          animationDuration={ text('animationDuration', '0.5s') }
          sidebar={ (
            <ul>
              <li>link a</li>
              <li>link b</li>
              <li>link c</li>
            </ul>
          ) }
        >
          <FlatTable>
            <FlatTableHead>
              <FlatTableRow>
                <FlatTableHeader>Client</FlatTableHeader>
                <FlatTableHeader>Client Type</FlatTableHeader>
                <FlatTableHeader>Categories</FlatTableHeader>
                <FlatTableHeader>Services</FlatTableHeader>
                <FlatTableHeader>Client</FlatTableHeader>
                <FlatTableHeader>Client Type</FlatTableHeader>
                <FlatTableHeader>Categories</FlatTableHeader>
                <FlatTableHeader>Services</FlatTableHeader>
              </FlatTableRow>
            </FlatTableHead>
            <FlatTableBody>
              <FlatTableRow>
                <FlatTableCell>John Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group2</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
                <FlatTableCell>John Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group2</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
              </FlatTableRow>
              <FlatTableRow>
                <FlatTableCell>Jane Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group3</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
                <FlatTableCell>Jane Doe</FlatTableCell>
                <FlatTableCell>Business</FlatTableCell>
                <FlatTableCell>Group1, Group3</FlatTableCell>
                <FlatTableCell>Accounting</FlatTableCell>
              </FlatTableRow>
              <FlatTableRow>
                <FlatTableCell>John Smith</FlatTableCell>
                <FlatTableCell>Charity</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Payroll</FlatTableCell>
                <FlatTableCell>John Smith</FlatTableCell>
                <FlatTableCell>Charity</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Payroll</FlatTableCell>
              </FlatTableRow>
              <FlatTableRow>
                <FlatTableCell>Jane Smith</FlatTableCell>
                <FlatTableCell>Partnership</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Final Tax</FlatTableCell>
                <FlatTableCell>Jane Smith</FlatTableCell>
                <FlatTableCell>Partnership</FlatTableCell>
                <FlatTableCell>Group3</FlatTableCell>
                <FlatTableCell>Final Tax</FlatTableCell>
              </FlatTableRow>
            </FlatTableBody>
          </FlatTable>
        </Drawer>
      </div>
    )
  </Story>
</Preview>

### Controlled Usage:

<Preview>
  <Story name="controlled" parameters={{ info: { disable: true }}} >
    {() => {
      const [isExpanded, setIsExpanded] = useState(true);
      const onChangeHandler = useCallback(() => {
        setIsExpanded(!isExpanded);
        action('expansionToggled');
      }, [isExpanded]);
      return (
        <div>
          <p>
            Note: if you experience glitchy animation on `Drawer` component,
            please open canvas in new window (2nd icon in top right corner)
          </p>
          <div style={ { height: '200px' } }>
            <Drawer
              expandedWidth={ text('expandedWidth', '40%') }
              animationDuration={ text('animationDuration', '0.5s') }
              expanded={ isExpanded }
              onChange={ onChangeHandler }
              sidebar={ (
                <ul>
                  <li>link a</li>
                  <li>link b</li>
                  <li>link c</li>
                </ul>
              ) }
            >
              content body content body content body content body content body content body content body
            </Drawer>
          </div>
        </div>
      )
    }}
  </Story>
</Preview>

## Props:

### Drawer

<Props of={Drawer} />
