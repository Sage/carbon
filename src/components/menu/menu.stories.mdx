import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import { useState } from "react";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";
import {
  Menu,
  MenuItem,
  MenuDivider,
  MenuSegmentTitle,
  ScrollableBlock,
  MenuFullscreen,
} from ".";
import * as stories from "./menu.stories";

<Meta title="Menu" parameters={{ info: { disable: true } }} />

# Menu

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/59e0bd-menu"
  style={{ color: "#007E45", fontWeight: "bold", textDecoration: "underline" }}
>
  Product Design System component
</a>

Provides navigation for an app, which can be used via mouse or keyboard.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import {
  Menu,
  MenuItem,
  MenuDivider,
  MenuSegmentTitle,
  ScrollableBlock,
  MenuFullscreen,
} from "carbon-react/lib/components/menu";
```

## Examples

### Default

<Canvas>
  <Story name="default" story={stories.DefaultStory} />
</Canvas>

### Selected

<Canvas>
  <Story name="selected" story={stories.SelectedStory} />
</Canvas>

### Divider

<Canvas>
  <Story name="divider" story={stories.DividerStory} />
</Canvas>

### Large divider

<Canvas>
  <Story name="large divider" story={stories.LargeDividerStory} />
</Canvas>

### Segment title

<Canvas>
  <Story name="segment title" story={stories.SegmentTitleStory} />
</Canvas>

### With alternate colour variant

<Canvas>
  <Story name="alternate colour" story={stories.AlternateColourStory} />
</Canvas>

### Submenu options

<Canvas>
  <Story name="submenu options" story={stories.SubmenuOptionsStory} />
</Canvas>

### Submenu direction left

<Canvas>
  <Story
    name="submenu direction left"
    story={stories.SubmenuDirectionLeftStory}
  />
</Canvas>

### With icon

<Canvas>
  <Story name="with icon" story={stories.WithIconStory} />
</Canvas>

### No dropdown arrow on submenu

The example below has set the `showDropdownArrow` to false for the MenuItem with a submenu which means no dropdown arrow
is rendered.

<Canvas>
  <Story
    name="no submenu dropdown arrow"
    story={stories.NoDropdwonArrowOnSubmenuStory}
  />
</Canvas>

### Split submenu into separate component

If you need to split out a submenu into a separate component, it must be done as shown below in order for the keyboard navigation to work as intended.

<Canvas>
  <Story
    name="submenu separate component"
    story={stories.SplitSubmenuIntoSeparateComponentStory}
  />
</Canvas>

### Submenu icon and text alignment

In order to align text and icons within a submenu a `Box` component will need to be used to adjust the margin of the content.

<Canvas>
  <Story name="button icon" story={stories.SubmeuIconAndTextAlignment} />
</Canvas>

### Scrollable submenu

A scrollable submenu can be added using the `ScrollableBlock` component. This can be used for all of the submenu items, or just a selection, as shown in `Menu Itme Four` below.
Note that only one `ScrollableBlock` can be used within a single submenu.

<Canvas>
  <Story name="scrollable submenu" story={stories.ScrollableSubmenuStory} />
</Canvas>

### Scrollable submenu with parent

This is an example of using the `parent` prop of `ScrollableBlock` to render a scrollable sublist of a parent item. The `parentVariant`
prop can be used to give it a variant that's different from that used in the `ScrollableBlock`.

Note that the result shown here, for those interacting with the page without assisistive technology, is the same as that which
would be produced by leaving out the `parent` prop and putting the `Search` component inside a separate `MenuItem` just before the
`ScrollableBlock`. However the rendered HTML would be different, with the `ScrollableBlock` becoming a sublist inside its own list
item that is not connected to the Search - in this example there is a clear semantic relationship between the search input and the
scrollable list so the `parent` prop should be used to ensure screenreaders make the relationship clear to their users.

<Canvas>
  <Story
    name="scrollable submenu with parent item"
    story={stories.ScrollableSubmenuWithParent}
  />
</Canvas>

### Submenu with search

<Canvas>
  <Story name="submenu with search" story={stories.SubmenuWithSearch} />
</Canvas>

### Truncated titles

Menu items can be given a maximum width using the `maxWidth` prop. Text overflowing this width will be truncated.
A title attribute is added to the item when using this prop, containing the full menu item text.

<Canvas>
  <Story name="truncated titles" story={stories.TruncatedTitlesStory} />
</Canvas>

### Responsive composition

This story is best viewed in the `canvas` view and by adjusting the size of the window to see the various Menu compositions
at the different breakpoints.

<Canvas>
  <Story
    name="responsive composition"
    story={stories.ResponsiveCompositionStory}
  />
</Canvas>

### Fullscreen view

This story is best viewed in the `canvas` view and by adjusting the size of the window. The fullscreen menu behaviour will
trigger when the screen size is smaller than `1200px`. Please note the `MenuItem`s are intended to have a width that fills the viewport,
as such any `maxWidth` value passed will not be set when they are children of `MenuFullscreen`.

<Canvas>
  <Story name="fullscreen view" story={stories.FullscreenViewStory} />
</Canvas>

## Props

### Menu

<StyledSystemProps of={Menu} flexBox layout noHeader />

### MenuItem

<StyledSystemProps of={MenuItem} flexBox layout padding noHeader />

### ScrollableBlock

<ArgsTable of={ScrollableBlock} />

### MenuDivider

<ArgsTable of={MenuDivider} />

### MenuSegmentTitle

<ArgsTable of={MenuSegmentTitle} />

### MenuFullscreen

<ArgsTable of={MenuFullscreen} />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "menuFullscreen.ariaLabels.closeButton",
      description: "Aria label for the MenuFullscreen's close button",
      type: "func",
      returnType: "string",
    },
  ]}
/>
