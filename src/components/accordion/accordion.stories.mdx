import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';

import { AccordionGroup, Accordion } from '.';
import Textbox from '../../__experimental__/components/textbox';

<Meta
  title="Design System/Accordion"
  parameters={{ info: { disable: true }}}
/>

# Accordion
Group, hide and show content.

## Overview
Accordions are a good progressive disclosure technique - initially showing only top-level information, but allowing the user quick access to more on request. But, they can confuse users sometimes, so use them sparingly.

## Guidance, hints and tips

Don’t put accordions within accordions.

Don’t hide important controls within accordions - for example, primary actions should always be outside them.

Accordions expand and collapse vertically. If there are lots, or content is extensive, be careful that the user doesn’t become confused, lose their place, or have problems with discoverability. Use them sparingly for these reasons.

Accordions should remain open or closed until a user interacts with them. Consider whether multiple, or only one accordion section can be open at a time.

An arrow icon pointing down indicates that the accordion is closed.

An arrow icon pointing up indicates that the accordion is open.

The icon can animate when a transition is made.

The user can click the icon directly, the text label, or the text label’s background to action the accordion.

## Quick Start

To use accordion, import the `Accordion` and pass the content as children.

It can be used as a controlled component where the expansion state is controlled externally,
in that case both `onChange` and `expanded` props are required.

```jsx
import { Accordion } from "carbon-react/lib/components/accordion"

const MyComponent = () => (
  <Accordion onChange={ onChange } expanded={ expanded } title="Title">
    <p>Content as a children</p>
  </Accordion>
);
```

It can also be used as an uncontrolled component where the expansion state is controlled internally.
It is still possible to pass `onChange` to hook a callback for state changes, however to set initial expansion state `defaultExpanded` can be passed.

```jsx
import { Accordion } from "carbon-react/lib/components/accordion"

const MyComponent = () => (
  <Accordion onChange={ onChange } defaultExpanded={ true } title="Title">
    <p>Content as a children</p>
  </Accordion>
);
```

## Visuals

### Primary
Primary version of accordion has white background and a border.
<Preview>
  <Story name="primary">
    <Accordion title='Heading'>
      <div>Content</div>
      <div>Content</div>
      <div>Content</div>
    </Accordion>
  </Story>
</Preview>

### Secondary
Secondary version is transparent and has no borders.
<Preview>
  <Story name="secondary">
    <Accordion type="secondary" title='Heading'>
      <div>Content</div>
      <div>Content</div>
      <div>Content</div>
    </Accordion>
  </Story>
</Preview>

### Grouped
Accordions borders collapse when positioned next to each other making it easy to group them.
To achieve proper keyboard accessibility as described in `W3` sources it is required to wrap neighbouring accordions in
`AccordionGroup`.

```jsx
import { Accordion, AccordionGroup } from "carbon-react/lib/components/accordion"
```

<Preview>
  <Story id="test-accordion--grouped" name="grouped">
  </Story>
</Preview>


### With overriden styles
Accordion styles can be easily overriden by providing `styleOverride` prop with proper structure as defined in propTypes.

<Preview>
  <Story name="styles overriden">
    <Accordion
      title='Heading'
      styleOverride={
        {
          headerArea: {
            padding: '24px',
            marginLeft: 'calc(15% - 24px)'
          },
          content: { paddingLeft: 0 }
        }
      }
    >
      <Textbox
        label='Label 1'
        labelInline
        labelAlign='right'
        labelWidth={ 15 }
        inputWidth={ 85 }
      />
    </Accordion>
  </Story>
</Preview>

<Props of={Accordion} />