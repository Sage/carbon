import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import { AccordionGroup, Accordion } from ".";

import {
  AccordionDefault,
  WithDisableContentPadding,
  Transparent,
  Small,
  Subtitle,
  Fullborder,
  LeftAlignedIcon,
  DifferentWidth,
  WithDifferentPaddingAndMargin,
  WithDifferentPaddingAndMarginInAccordionTitle,
  WithBoxComponentAndDifferentPaddings,
  OpeningButton,
  Grouped,
  WithValidationIcon,
  WithDefinitionList,
  WithDynamicContent,
} from "./accordion.stories.tsx";

<Meta title="Accordion" parameters={{ info: { disable: true } }} />

# Accordion

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/028f94-accordion/b/3614a6"
  style={{ color: '#007E45', fontWeight: 'bold', textDecoration: 'underline' }}
>
  Product Design System component 
</a>

Accordions are a good progressive disclosure technique - initially showing only top-level information, but allowing the user quick access to more on request. But, they can confuse users sometimes, so use them sparingly.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

To use accordion, import the `Accordion` and pass the content as children. To group accordions import `AccordionGroup`.

```javascript
import {
  Accordion,
  AccordionGroup,
} from "carbon-react/lib/components/accordion";
```

It can be used as a controlled component where the expansion state is controlled externally,
in that case both `onChange` and `expanded` props are required.

```javascript
import { Accordion } from "carbon-react/lib/components/accordion";

const MyComponent = () => (
  <Accordion onChange={onChange} expanded={expanded} title="Title">
    <p>Content as a children</p>
  </Accordion>
);
```

It can also be used as an uncontrolled component where the expansion state is controlled internally.
It is still possible to pass `onChange` to hook a callback for state changes, however to set initial expansion state `defaultExpanded` can be passed.

```javascript
import { Accordion } from "carbon-react/lib/components/accordion";

const MyComponent = () => (
  <Accordion onChange={onChange} defaultExpanded={true} title="Title">
    <p>Content as a children</p>
  </Accordion>
);
```

## Examples

### Default

Default version of accordion has white background and no side borders.

<Canvas>
  <Story name="default" story={AccordionDefault} />
</Canvas>

### With disableContentPadding

Accordion without padding inside of the content.

<Canvas>
  <Story
    parameters={{ chromatic: { disable: true } }}
    name="with disableContentPadding"
    story={WithDisableContentPadding}
  />
</Canvas>

### Transparent

Transparent scheme has transparent background.

<Canvas>
  <Story 
    name="transparent" 
    parameters={{ chromatic: { disable: true } }}
    story={Transparent}
  />
</Canvas>

### Small

Small version has a smaller heading and less padding.

<Canvas>
  <Story 
    name="small"
    story={Small}
  />
</Canvas>

### Sub title

A sub title can be added when the size is large (default).

<Canvas>
  <Story 
    name="sub title" 
    story={Subtitle}
  />
</Canvas>

### Full border

The accordion can have side borders along with the default top and bottom.

<Canvas>
  <Story 
    name="full border"
    story={Fullborder}
  />
</Canvas>

### Left aligned icon

The accordion icon can be left aligned.

<Canvas>
  <Story 
    name="icon left"
    story={LeftAlignedIcon}
  />
</Canvas>

### Different width

The default width of 100% can be overriden.

<Canvas>
  <Story 
    name="different width"
    story={DifferentWidth}
  />
</Canvas>

### With different padding and margin

Showing the different paddings and margins

<Canvas>
  <Story 
    name="with different padding and margin"
    story={WithDifferentPaddingAndMargin}
  />
</Canvas>

### With different padding and margin in Accordion title

Showing the different paddings and margins within the accordion title

<Canvas>
  <Story 
    name="with different padding and margin in Accordion title"
    story={WithDifferentPaddingAndMarginInAccordionTitle}
  />
</Canvas>

### With Box component and different paddings

The box component can be used inside the accordion with different paddings

<Canvas>
  <Story
    name="with Box component and different paddings"
    parameters={{ chromatic: { disable: true } }}
    story={WithBoxComponentAndDifferentPaddings}
  />
</Canvas>

### Opening button

Setting the `buttonHeading` prop will override the default styling for the `Accordion` control to look like Carbon's tertiary
`Button`. It is also possible to use the `buttonWidth` prop to set the width of the control and the `headerSpacing` prop
can be used to override the spacing styles.

This is not currently designed to be used within a form using validation.

<Canvas>
  <Story
    name="opening button"
    story={OpeningButton}
  />
</Canvas>

### Grouped

To group accordions import `AccordionGroup`. Accordions borders collapse when positioned next to each other making it easy to group them.
To achieve proper keyboard accessibility as described in `W3` sources it is required to wrap neighbouring accordions in
`AccordionGroup`.

<Canvas>
  <Story
    name="grouped" 
    story={Grouped}
  />
</Canvas>

### With validation icon

The `ValidationIcon` can be displayed in the `Accordion` header by passing in a string via one of the `error`,
`warning` or `info` props. This message will be displayed as in the tooltip.

<Canvas>
  <Story
    name="validation icon"
    story={WithValidationIcon}
  />
</Canvas>

### With dynamic content

Accordion adjust it's height properly when it's content is being dynamically changed

<Canvas>
  <Story
    name="with dynamic content"
    story={WithDynamicContent}
  />
</Canvas>

### With a definition list

Accordion with a definiton list

<Canvas>
  <Story
    name="with a definition list"
    parameters={{ chromatic: { disable: true } }}
    story={WithDefinitionList}
  />
</Canvas>

## Props

### Accordion

<StyledSystemProps of={Accordion} noHeader spacing />

### AccordionGroup

<StyledSystemProps of={AccordionGroup} noHeader margin />