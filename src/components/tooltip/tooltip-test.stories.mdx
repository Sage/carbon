import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import Tooltip from ".";
import Button from "../button";
import { TOOLTIP_POSITIONS } from "./tooltip.config";

<Meta
  title="Tooltip/Test"
  parameters={{
    info: { disable: true },
    chromatic: {
      disable: true,
    },
  }}
  argTypes={{
    type: {
      options: ["error", "default", "info", "warning"],
      control: {
        type: "select",
      },
    },
    size: {
      options: ["medium", "large"],
      control: {
        type: "select",
      },
    },
    flipOverrides: {
      options: ["left", "right", "top", "bottom"],
      control: {
        type: "select",
      },
    },
    position: {
      options: TOOLTIP_POSITIONS,
      control: {
        type: "select",
      },
    },
    bgColor: {
      control: {
        type: "text",
      },
    },
    fontColor: {
      control: {
        type: "text",
      },
    },
  }}
/>

export const TooltipStory = ({
  message,
  isVisible,
  flipOverrides,
  ...args
}) => {
  const [stateVisible, setStateVisible] = useState(undefined);
  return (
    <Tooltip
      isVisible={stateVisible || isVisible}
      flipOverrides={flipOverrides && [flipOverrides]}
      message={message}
      {...args}
    >
      <Button
        {...(isVisible === false && {
          onMouseOver: () => setStateVisible(true),
          onMouseLeave: () => setStateVisible(false),
          onFocus: () => setStateVisible(true),
          onBlur: () => setStateVisible(false),
        })}
      >
        Hover me!
      </Button>
    </Tooltip>
  );
};

# Tooltip

### Default

<Canvas>
  <Story
    name="default"
    args={{
      position: "top",
      isVisible: true,
      message:
        "I'm a helpful tooltip that can display additional information to a user.",
      type: "default",
      size: "medium",
      bgColor: undefined,
      fontColor: undefined,
    }}
  >
    {TooltipStory.bind({})}
  </Story>
</Canvas>
