import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import { ArgsTable } from "@storybook/components";
import Preview from "./preview.component";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import Button from "../button";

<Meta title="Preview" parameters={{ info: { disable: true } }} />

# Preview

Applies a preview loading state animation.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Preview from "carbon-react/lib/components/preview";
```

## Examples

### Default

<Canvas>
  <Story name="default">
    <Preview loading />
  </Story>
</Canvas>

### Preview with Lines

<Canvas>
  <Story name="with Lines">
    <Preview loading lines={6} />
  </Story>
</Canvas>

### Preview with Children

<Canvas>
  <Story name="with Children">
    {() => {
      const [isLoading, setIsLoading] = useState(true);
      const handleOnClick = () => {
        setIsLoading(!isLoading);
      };
      return (
        <>
          <Preview loading={isLoading} lines={3}>
            This the where the children are rendered
          </Preview>
          <Button mt={2} onClick={handleOnClick}>
            {isLoading ? "Click to preview children" : "Click to see loading state"}
          </Button>
        </>
      );
    }}
  </Story>
</Canvas>

### Preview with Custom Width

<Canvas>
  <Story name="with Width">
    <Preview loading width={"256px"} />
  </Story>
</Canvas>

### Preview with Custom Height

<Canvas>
  <Story name="with Height">
    <Preview loading height={"256px"} />
  </Story>
</Canvas>

## Props

### Preview

<StyledSystemProps margin noHeader />

<ArgsTable
  rows={[
    {
      name: "children",
      type: { summary: "node" },
      description: "Children content to render in the component",
      required: false,
    },
    {
      name: "height",
      type: { summary: "string" },
      description: "A custom height to be applied to the component.",
      required: false,
    },
    {
      name: "lines",
      type: { summary: "number" },
      description: "The number of lines to render.",
      defaultValue: {
        summary: 1,
      },
    },
    {
      name: "loading",
      type: { summary: "boolean" },
      description: "Provides more control over when in a loading state.",
      required: false,
    },
    {
      name: "width",
      type: { summary: "string" },
      description: "A custom width.",
      required: false,
    },
  ]}
/>
