import { useState } from "react";
import { Meta, Story, Preview, Props } from "@storybook/addon-docs";

import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import GroupedCharacter from ".";
import { OriginalTextbox } from "../textbox";
import Button from "../button";
import Box from "../box";

<Meta title="GroupedCharacter" parameters={{ info: { disable: true } }} />

# GroupedCharacter

Capture data with punctuation inside the field.

Fields can have punctuation within them (most commonly characters like - or /). This gives the user a clue about the format accepted.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import GroupedCharacter from "carbon-react/lib/components/grouped-character";
```

## Examples

### Default

<Preview>
  <Story name="default">
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
        console.log(target.value);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
        />
      );
    }}
  </Story>
</Preview>

### Sizes

<Preview>
  <Story name="sizes">
    {() => {
      const [state, setState] = useState({
        small: "1231231",
        medium: "1231231",
        large: "1231231",
      });
      const handleChange = (size) => (e) => {
        setState({ ...state, [size]: e.target.value.rawValue });
      };
      return ["small", "medium", "large"].map((size) => (
        <GroupedCharacter
          key={`GroupedCharacter - ${size}`}
          label={`GroupedCharacter - ${size}`}
          value={state[size]}
          onChange={handleChange(size)}
          groups={[2, 2, 3]}
          separator="-"
          size={size}
          mb={2}
        />
      ));
    }}
  </Story>
</Preview>

### AutoFocus

<Preview>
  <Story name="autoFocus" parameters={{ chromatic: { disable: true } }}>
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
          autoFocus
        />
      );
    }}
  </Story>
</Preview>

### LabelAlign

<Preview>
  <Story name="labelAlign">
    {() => {
      const [state, setState] = useState({
        right: "1231231",
        left: "1231231",
      });
      const handleChange = (alignment) => (e) => {
        setState({ ...state, [alignment]: e.target.value.rawValue });
      };
      return ["right", "left"].map((alignment) => (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state[alignment]}
          onChange={handleChange(alignment)}
          groups={[2, 2, 3]}
          separator="-"
          labelInline
          inputWidth={50}
          key={alignment}
          labelAlign={alignment}
        />
      ));
    }}
  </Story>
</Preview>

### Disabled

<Preview>
  <Story name="disabled">
    <GroupedCharacter
      label="GroupedCharacter"
      value="1231231"
      groups={[2, 2, 3]}
      separator="-"
      disabled
    />
  </Story>
</Preview>

### Various separators

<Preview>
  <Story name="various separators">
    {() => {
      const [state, setState] = useState({
        ".": "1231231",
        ",": "1231231",
        ", ": "1231231",
        " ": "1231231",
        "-": "1231231",
        "/": "1231231",
        "|": "1231231",
      });
      const handleChange = (separator) => (e) => {
        setState({ ...state, [separator]: e.target.value.rawValue });
      };
      return [".", ",", " ", "-", "/", "|"].map((separator) => (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state[separator]}
          onChange={handleChange(separator)}
          groups={[2, 2, 3]}
          separator={separator}
          key={separator}
        />
      ));
    }}
  </Story>
</Preview>

### Various groups

<Preview>
  <Story name="various groups">
    {() => {
      const [state, setState] = useState({
        "2-2-3": "1231231",
        "1-2-4": "1231231",
        "3-2-2": "1231231",
        "3-1-3": "1231231",
      });
      const handleChange = (group) => (e) => {
        setState({ ...state, [group]: e.target.value.rawValue });
      };
      return [
        [2, 2, 3],
        [1, 2, 4],
        [3, 2, 2],
        [3, 1, 3],
      ].map((group) => (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state[group.join("-")]}
          onChange={handleChange(group.join("-"))}
          groups={group}
          separator="-"
          key={group.join("-")}
        />
      ));
    }}
  </Story>
</Preview>

### With labelInline

<Preview>
  <Story name="with labelInline" parameters={{ chromatic: { disable: true } }}>
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
          labelInline
        />
      );
    }}
  </Story>
</Preview>

### With custom labelWidth and inputWidth

<Preview>
  <Story name="with custom labelWidth and inputWidth">
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
          labelInline
          labelWidth={50}
          inputWidth={50}
        />
      );
    }}
  </Story>
</Preview>

### With fieldHelp

<Preview>
  <Story name="with fieldHelp">
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
          fieldHelp="Help"
        />
      );
    }}
  </Story>
</Preview>

### With labelHelp

<Preview>
  <Story name="with labelHelp">
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
          labelHelp="Help"
          helpAriaLabel="Help"
        />
      );
    }}
  </Story>
</Preview>

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Preview>
  <Story name="required">
    {() => {
      const [state, setState] = useState("1231231");
      const setValue = ({ target }) => {
        setState(target.value.rawValue);
      };
      return (
        <GroupedCharacter
          label="GroupedCharacter"
          value={state}
          onChange={setValue}
          groups={[2, 2, 3]}
          separator="-"
          required
        />
      );
    }}
  </Story>
</Preview>

### Validations

Validation status can be set by passing `error`, `warning` or `info` prop to the component

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Preview>
  <Story name="validations - string - component">
    {() => {
      const [state, setState] = useState({
        error: "1231231",
        warning: "1231231",
        info: "1231231",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value.rawValue });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <GroupedCharacter
            label="GroupedCharacter"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            groups={[2, 2, 3]}
            separator="-"
            {...{ [validationType]: "Message" }}
            mb={2}
          />
          <GroupedCharacter
            label="GroupedCharacter - readOnly"
            value="1231231"
            groups={[2, 2, 3]}
            separator="-"
            readOnly
            {...{ [validationType]: "Message" }}
            mb={2}
          />
        </div>
      ));
    }}
  </Story>
</Preview>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Preview>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    parameters={{ chromatic: { disable: true } }}
  >
    {() => {
      const [state, setState] = useState({
        error: "1231231",
        warning: "1231231",
        info: "1231231",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value.rawValue });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <GroupedCharacter
            label="GroupedCharacter"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            groups={[2, 2, 3]}
            separator="-"
            {...{ [validationType]: "Message" }}
            mb={2}
            tooltipPosition="bottom"
          />
        </div>
      ));
    }}
  </Story>
</Preview>

#### As a string, displayed on label

<Preview>
  <Story name="validations - string - label">
    {() => {
      const [state, setState] = useState({
        error: "1231231",
        warning: "1231231",
        info: "1231231",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value.rawValue });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-label`}>
          <GroupedCharacter
            label="GroupedCharacter"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            groups={[2, 2, 3]}
            separator="-"
            validationOnLabel
            {...{ [validationType]: "Message" }}
            mb={2}
          />
          <GroupedCharacter
            label="GroupedCharacter - readOnly"
            value="1231231"
            groups={[2, 2, 3]}
            separator="-"
            validationOnLabel
            readOnly
            {...{ [validationType]: "Message" }}
            mb={2}
          />
        </div>
      ));
    }}
  </Story>
</Preview>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Preview>
  <Story
    name="validations - string - with tooltipPosition overriden - label"
    parameters={{ chromatic: { disable: true } }}
  >
    {() => {
      const [state, setState] = useState({
        error: "1231231",
        warning: "1231231",
        info: "1231231",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value.rawValue });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-label`}>
          <GroupedCharacter
            label="GroupedCharacter"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            groups={[2, 2, 3]}
            separator="-"
            validationOnLabel
            {...{ [validationType]: "Message" }}
            mb={2}
            tooltipPosition="top"
          />
        </div>
      ));
    }}
  </Story>
</Preview>

#### As a boolean

<Preview>
  <Story name="validations - boolean">
    {() => {
      const [state, setState] = useState({
        error: "1231231",
        warning: "1231231",
        info: "1231231",
      });
      const handleChange = (validation) => (e) => {
        setState({ ...state, [validation]: e.target.value.rawValue });
      };
      return ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-boolean-component`}>
          <GroupedCharacter
            label="GroupedCharacter"
            value={state[validationType]}
            onChange={handleChange(validationType)}
            groups={[2, 2, 3]}
            separator="-"
            {...{ [validationType]: true }}
            mb={2}
          />
          <GroupedCharacter
            label="GroupedCharacter - readOnly"
            value="1231231"
            groups={[2, 2, 3]}
            separator="-"
            readOnly
            {...{ [validationType]: true }}
            mb={2}
          />
        </div>
      ));
    }}
  </Story>
</Preview>

## Props

### GroupedCharacter

<StyledSystemProps of={GroupedCharacter} noHeader margin />

Due to the `Textbox` component being used internally by the `GroupedCharacter` component most of the `Textbox` props can be applied to `GroupedCharacter`

<Props of={OriginalTextbox} />

**Any other supplied props will be provided to the underlying HTML input element**
