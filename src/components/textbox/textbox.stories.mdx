import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";

import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";
import Textbox, { OriginalTextbox } from ".";
import CarbonProvider from "../carbon-provider/carbon-provider.component";

<Meta title="Textbox" parameters={{ info: { disable: true } }} />

# Textbox

Captures a single line of text.

## Contents

- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Textbox from "carbon-react/lib/components/textbox";
```

## Designer Notes

- Use placeholder text to give the user examples of data formats (e.g. AB123456C for a UK National Insurance number).
- Use prefixes if your data always begins with a certain sequence (e.g. a UK VAT number usually starts with ‘GB’).
- If content in a textbox is never editable, think about removing the field border so it appears as static text.
- You can disable a textbox, but try to avoid this. If you need to, make it clear what the user needs to do in order to activate the textbox.
- Use wider fields for longer data (e.g. an address line), and narrower fields for shorter data (e.g. a postcode), to give the user a clue about the data expected.

## Examples

### Default

<Canvas>
  <Story name="default">
    {() => {
      const [state, setState] = useState("Textbox");
      const setValue = ({ target }) => {
        setState(target.value);
      };
      return <Textbox label="Textbox" value={state} onChange={setValue} />;
    }}
  </Story>
</Canvas>

### Character counter

<Canvas>
  <Story name="character counter">
    {() => {
      const [state, setState] = useState("Textbox");
      const setValue = ({ target }) => {
        setState(target.value);
      };
      return (
        <Textbox
          label="Textbox"
          value={state}
          onChange={setValue}
          characterLimit="10"
          enforceCharacterLimit={false}
          warnOverLimit
        />
      );
    }}
  </Story>
</Canvas>

### Sizes

<Canvas>
  <Story name="sizes">
    {() =>
      ["small", "medium", "large"].map((size) => (
        <div style={{ width: "296px" }} key={size}>
          <Textbox
            label={`Textbox - ${size}`}
            defaultValue="Textbox"
            size={size}
            mb={2}
          />
          <Textbox
            label={`Textbox - ${size} - with icon`}
            defaultValue="Textbox"
            size={size}
            inputIcon="search"
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Canvas>

### Margins

<Canvas>
  <Story name="margins">
    {() => {
      const [state, setState] = useState("Textbox");
      const setValue = ({ target }) => {
        setState(target.value);
      };
      return (
        <Textbox label="Textbox" value={state} onChange={setValue} m={4} />
      );
    }}
  </Story>
</Canvas>

### AutoFocus

<Canvas>
  <Story name="autoFocus" parameters={{ chromatic: { disable: true } }}>
    <>
      <Textbox label="Textbox" value="Textbox" autoFocus />
      <Textbox label="Textbox" value="Textbox" autoFocus />
    </>
  </Story>
</Canvas>

### Prefix

<Preview>
  <Story name="prefix">
    <Textbox label="Textbox" value="Textbox" prefix="pre" />;
  </Story>
</Preview>

### Disabled

<Canvas>
  <Story name="disabled">
    <div style={{ width: "296px" }}>
      <Textbox label="Textbox" value="Textbox" disabled />
      <Textbox
        label="Textbox with icon"
        value="Textbox"
        disabled
        inputIcon="search"
      />
    </div>
  </Story>
</Canvas>

### ReadOnly

<Canvas>
  <Story name="readOnly">
    <div style={{ width: "296px" }}>
      <Textbox label="Textbox" value="Textbox" readOnly />
      <Textbox
        label="Textbox with icon"
        value="Textbox"
        readOnly
        inputIcon="search"
      />
    </div>
  </Story>
</Canvas>

### With labelInline

<Canvas>
  <Story name="with labelInline" parameters={{ chromatic: { disable: true } }}>
    <Textbox label="Textbox" value="Textbox" labelInline />
  </Story>
</Canvas>

### With custom labelWidth and inputWidth

<Canvas>
  <Story name="with custom labelWidth and inputWidth">
    <Textbox
      label="Textbox"
      value="Textbox"
      labelInline
      labelWidth={50}
      inputWidth={50}
    />
  </Story>
</Canvas>

### With fieldHelp

<Canvas>
  <Story name="with fieldHelp">
    <Textbox label="Textbox" value="Textbox" fieldHelp="Help" />
  </Story>
</Canvas>

### With labelHelp

<Canvas>
  <Story name="with labelHelp">
    <Textbox
      label="Textbox"
      value="Textbox"
      labelHelp="Help"
      helpAriaLabel="Help"
    />
  </Story>
</Canvas>

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Canvas>
  <Story name="required">
    <Textbox label="Textbox" value="Textbox" required />
  </Story>
</Canvas>

### LabelAlign

<Canvas>
  <Story name="labelAlign">
    {() =>
      ["right", "left"].map((alignment) => (
        <Textbox
          label="Textbox"
          value="Textbox"
          labelInline
          inputWidth={50}
          key={alignment}
          labelAlign={alignment}
        />
      ))
    }
  </Story>
</Canvas>

### Validations

Validation status can be set by passing `error`, `warning` or `info` prop to the component

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Canvas>
  <Story name="validations - string - component">
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <Textbox
            label="Textbox"
            value="Textbox"
            {...{ [validationType]: "Message" }}
            mb={2}
          />
          <Textbox
            label="Textbox - readOnly"
            value="Textbox"
            readOnly
            {...{ [validationType]: "Message" }}
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    parameters={{ chromatic: { disable: true } }}
  >
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-component`}>
          <Textbox
            label="Textbox"
            value="Textbox"
            {...{ [validationType]: "Message" }}
            mb={2}
            tooltipPosition="bottom"
          />
        </div>
      ))
    }
  </Story>
</Canvas>

#### As a string, displayed on label

<Canvas>
  <Story name="validations - string - label">
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-label`}>
          <Textbox
            label="Textbox"
            value="Textbox"
            validationOnLabel
            {...{ [validationType]: "Message" }}
            mb={2}
          />
          <Textbox
            label="Textbox - readOnly"
            value="Textbox"
            validationOnLabel
            readOnly
            {...{ [validationType]: "Message" }}
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Canvas>

#### New designs validation

<Preview>
  <Story name="validations - string - new design">
    {() =>
      <>
        <CarbonProvider validationRedesignOptIn>
          {["error", "warning"].map((validationType) => (
            ["small", "medium", "large"].map((size) => (
              <div style={{ width: "296px" }} key={`${validationType}-${size}`}>
                <Textbox
                  m={4}
                  label={`${size} - ${validationType}`} 
                  defaultValue="Textbox"
                  labelHelp="Hint text (optional)"
                  size={size}
                  {...{ [validationType]: "Message" }}
                />
                <Textbox
                  m={4}
                  label={`readOnly - ${size} - ${validationType}`} 
                  defaultValue="Textbox"
                  size={size}
                  labelHelp="Hint text (optional)"
                  readOnly
                  {...{ [validationType]: "Message" }}
                />
              </div>
            ))
          ))}
        </CarbonProvider>
      </>
    }
  </Story>
</Preview>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - label"
    parameters={{ chromatic: { disable: true } }}
  >
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-string-label`}>
          <Textbox
            label="Textbox"
            value="Textbox"
            validationOnLabel
            {...{ [validationType]: "Message" }}
            mb={2}
            tooltipPosition="bottom"
          />
        </div>
      ))
    }
  </Story>
</Canvas>

#### As a boolean

<Canvas>
  <Story name="validations - boolean">
    {() =>
      ["error", "warning", "info"].map((validationType) => (
        <div key={`${validationType}-boolean-component`}>
          <Textbox
            label="Textbox"
            value="Textbox"
            {...{ [validationType]: true }}
            mb={2}
          />
          <Textbox
            label="Textbox - readOnly"
            value="Textbox"
            readOnly
            {...{ [validationType]: true }}
            mb={2}
          />
        </div>
      ))
    }
  </Story>
</Canvas>

## Props

### Textbox

<StyledSystemProps of={OriginalTextbox} noHeader margin />

**Any other supplied props will be provided to the underlying HTML input element**

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "locale",
      description:
        "The locale code to display the correct number format in the counter",
      type: "func",
      returnType: "string",
    },
  ]}
/>
