import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";

import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import Textbox from ".";

import * as stories from "./textbox.stories";

<Meta title="Textbox" parameters={{ info: { disable: true } }} />

# Textbox

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/60f854-text-input/b/007c6c"
  style={{ color: "#007E45", fontWeight: "bold", textDecoration: "underline" }}
>
  Product Design System component
</a>

Captures a single line of text.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Textbox from "carbon-react/lib/components/textbox";
```

## Designer Notes

- Use placeholder text to give the user examples of data formats (e.g. AB123456C for a UK National Insurance number).
- Use prefixes if your data always begins with a certain sequence (e.g. a UK VAT number usually starts with ‘GB’).
- If content in a textbox is never editable, think about removing the field border so it appears as static text.
- You can disable a textbox, but try to avoid this. If you need to, make it clear what the user needs to do in order to activate the textbox.
- Use wider fields for longer data (e.g. an address line), and narrower fields for shorter data (e.g. a postcode), to give the user a clue about the data expected.

## Examples

### Default

<Canvas>
  <Story name="default" story={stories.Default} />
</Canvas>

### Character counter

If you use the `inputHint` prop to provide the user with a hint before the input, please use a full stop `.` at the end,
as it forces a pause before any other announcements, this well help screen reader users understand the hint fully.

<Canvas>
  <Story name="character counter" story={stories.CharacterCounter} />
</Canvas>

### Character counter with translations

Various translations can be applied to both the visually hidden hint message, and the character 
counter below the input. 

These translations have been split up to include a number which represents the current character count which
is over/under the set `characterLimit`. Please see below how this has been achieved with a French translation.
Include the formatted number count wherever makes sense for the language you're translating too.

<Canvas>
  <Story name="character counter with translations" story={stories.CharacterCounterTranslations} />
</Canvas>

### Prefix

<Canvas>
  <Story name="prefix" story={stories.Prefix} />
</Canvas>

### Sizes

<Canvas>
  <Story name="sizes" story={stories.Sizes} />
</Canvas>

### Margins

<Canvas>
  <Story name="margins" story={stories.Margins} />
</Canvas>

### AutoFocus

<Canvas>
  <Story name="autoFocus" story={stories.AutoFocus} />
</Canvas>

### Disabled

<Canvas>
  <Story name="disabled" story={stories.Disabled} />
</Canvas>

### ReadOnly

<Canvas>
  <Story name="readOnly" story={stories.ReadOnly} />
</Canvas>

### With labelInline

<Canvas>
  <Story name="with labelInline" story={stories.WithLabelInline} />
</Canvas>

### With custom labelWidth and inputWidth

<Canvas>
  <Story
    name="with custom labelWidth and inputWidth"
    story={stories.WithCustomLabelWidthAndInputWidth}
  />
</Canvas>

### With custom maxWidth

<Canvas>
  <Story name="with custom maxWidth" story={stories.WithCustomMaxWidth} />
</Canvas>

### With fieldHelp

<Canvas>
  <Story name="with fieldHelp" story={stories.WithFieldHelp} />
</Canvas>

### With inputHint

When the `inputHint` prop is passed, please use a full stop `.` at the end. This forces a pause 
before any other announcements, this well help screen reader users understand the hint fully.

<Canvas>
  <Story name="with inputHint" story={stories.WithInputHint} />
</Canvas>

### With labelHelp

<Canvas>
  <Story name="with labelHelp" story={stories.WithLabelHelp} />
</Canvas>

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Canvas>
  <Story name="required" story={stories.Required} />
</Canvas>

### LabelAlign

<Canvas>
  <Story name="labelAlign" story={stories.LabelAlign} />
</Canvas>

### Validations

Validation status can be set by passing `error`, `warning` or `info` prop to the component

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Canvas>
  <Story
    name="validations - string - component"
    story={stories.ValidationsAsAString}
  />
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    story={stories.ValidationsAsAStringWithTooltipCustom}
  />
</Canvas>

#### As a string, displayed on label

<Canvas>
  <Story
    name="validations - string - label"
    story={stories.ValidationsAsAStringDisplayedOnLabel}
  />
</Canvas>

#### New designs validation

<Canvas>
  <Story
    name="validations - string - new design"
    story={stories.NewDesignsValidation}
  />
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - label"
    story={stories.ValidationsAsAStringWithTooltipDefault}
  />
</Canvas>

#### As a boolean

<Canvas>
  <Story name="validations - boolean" story={stories.ValidationsAsABoolean} />
</Canvas>

## Props

### Textbox

<StyledSystemProps of={Textbox} noHeader margin />

**Any other supplied props will be provided to the underlying HTML input element**

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "characterCount.tooManyCharacters",
      description:
        "The message displayed below the input which will inform"
        +" users if they have exceeded the set `characterLimit` and how much by." 
        +" This will also be announced to screen readers.",
      type: "func",
      returnType: "string",
    },
        {
      name: "characterCount.charactersLeft",
      description:
        "The message displayed below the input which will inform"
        +" users how many characters they have before they reach  or exceed the"
        +" set `characterLimit`. This will also be announced to screen readers.",      
        type: "func",
      returnType: "string",
    },
        {
      name: "characterCount.visuallyHiddenHint",
      description:
        "The message which will be read out to screen reader users, informing them"
        +" of the set `characterLimit`.",
      type: "func",
      returnType: "string",
    },
  ]}
/>