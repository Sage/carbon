import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";

import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";
import ProgressTracker from ".";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";

<Meta title="Progress Tracker" parameters={{ info: { disable: true } }} />

# ProgressTracker

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/00f4d0-progress-tracker"
  style={{ color: '#007E45', fontWeight: 'bold', textDecoration: 'underline' }}
>
  Product Design System component 
</a>

Use the `ProgressTracker` component to let users know a task or loading data is still in progress.
Showing a `ProgressTracker` helps the user to understand that they should wait, rather than reload the page or abandon a process.
In general, place a `ProgressTracker` in the centre and middle of the page or container it relates to.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Accessibility](#accessibility)
- [Props](#props)

## Quick Start

```javascript
import ProgressTracker from "carbon-react/lib/components/progress-tracker";
```

## Examples

### Default

This example of the `ProgressTracker` component demonstrates how it will appear as default. Please note by default the
`progress` is set to `0`, but for the purpose of the demo it has been set to `50`.

<Canvas>
  <Story name="default">
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <ProgressTracker progress={50} />
    </div>
  </Story>
</Canvas>

### Small bar size

This is an example of a small `ProgressTracker` component.

<Canvas>
  <Story name="size - small">
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <ProgressTracker size="small" progress={50} showDefaultLabels />
    </div>
  </Story>
</Canvas>

### Large bar size

This is an example of a large `ProgressTracker` component.

<Canvas>
  <Story name="size - large">
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <ProgressTracker size="large" progress={50} showDefaultLabels />
    </div>
  </Story>
</Canvas>

### Custom bar length

The length of the bar can be set to any valid css property. This sets the width of a horizontal bar or the height of a vertical bar. The default is "256px".

<Canvas>
  <Story name="custom bar length">
    <div style={{ display: "flex", justifyContent: "space-evenly" }}>
      <ProgressTracker progress={50} length="150px" />
    </div>
  </Story>
</Canvas>

### Color variants

This is an example of a `ProgressTracker` component with different colors depending on progress.

<Canvas>
  <Story name="color variants">
    <div
      style={{ display: "flex", flexDirection: "column", alignItems: "center" }}
    >
      <ProgressTracker progress={15} currentProgressLabel="15%" />
      <ProgressTracker mt={2} progress={50} currentProgressLabel="50%" />
      <ProgressTracker mt={2} progress={100} currentProgressLabel="100%" />
      <ProgressTracker
        mt={2}
        progress={100}
        error
        currentProgressLabel="error"
      />
    </div>
  </Story>
</Canvas>

### Default label values

This is an example of a `ProgressTracker` component with `showDefaultLabels` set to `true`, which will render the labels as
percentages.

<Canvas>
  <Story name="default label value">
    <div
      style={{ display: "flex", flexDirection: "column", alignItems: "center" }}
    >
      <ProgressTracker mt={2} progress={15} currentProgressLabel="15%" />
      <ProgressTracker mt={2} progress={50} currentProgressLabel="50%" />
      <ProgressTracker mt={2} progress={100} currentProgressLabel="100%" />
      <ProgressTracker
        mt={2}
        progress={100}
        error={true}
        currentProgressLabel="error"
      />
    </div>
  </Story>
</Canvas>

It is possible to override the default `labelsPosition` to `"bottom"`

<Canvas>
  <Story name="default label value - labelsPosition bottom">
    <div
      style={{ display: "flex", flexDirection: "column", alignItems: "center" }}
    >
      <ProgressTracker
        mt={2}
        labelsPosition="bottom"
        progress={15}
        currentProgressLabel="15%"
      />
      <ProgressTracker
        mt={2}
        labelsPosition="bottom"
        progress={50}
        currentProgressLabel="50%"
      />
      <ProgressTracker
        mt={2}
        labelsPosition="bottom"
        progress={100}
        currentProgressLabel="100%"
      />
      <ProgressTracker
        mt={2}
        labelsPosition="bottom"
        progress={100}
        error
        currentProgressLabel="error"
      />
    </div>
  </Story>
</Canvas>

### Custom label values

This is an example of a `ProgressTracker` component with `currentProgressLabel` and `maxProgressLabel` props.

<Canvas>
  <Story name="custom label values">
    <div
      style={{ display: "flex", flexDirection: "column", alignItems: "center" }}
    >
      <ProgressTracker
        progress={50}
        currentProgressLabel="$50"
        maxProgressLabel="$200"
      />
      <ProgressTracker
        mt={2}
        progress={70}
        currentProgressLabel="Step 3"
        maxProgressLabel="5"
        description="Adding VAT"
      />
      <ProgressTracker mt={2} progress={100} currentProgressLabel="$200" />
      <ProgressTracker
        mt={2}
        progress={100}
        error
        currentProgressLabel="error"
      />
    </div>
  </Story>
</Canvas>

It is also possible to render the component with a mix of default and custom labels by only setting one of the `currentProgressLabel`
and `maxProgressLabel` props and optionally setting the `showDefaultLabels` prop.

<Canvas>
  <Story name="default and custom label values">
    <div
      style={{ display: "flex", flexDirection: "column", alignItems: "center" }}
    >
      <ProgressTracker progress={50} currentProgressLabel="50%" />
      <ProgressTracker
        mt={2}
        progress={50}
        currentProgressLabel="Step 3"
        maxProgressLabel="5"
      />
      <ProgressTracker
        mt={2}
        progress={50}
        currentProgressLabel="50%"
        description="Adding VAT"
      />
      <ProgressTracker
        mt={2}
        progress={50}
        currentProgressLabel="Step 3"
        maxProgressLabel="5"
        description="Adding VAT"
      />
    </div>
  </Story>
</Canvas>

## Accessibility

This component has `aria-valuemin`, `aria-valuemax`, `aria-valuenow` and `aria-valuetext` props that can be utilised to enhance the experience for a user that requires a screenreader.

For more information on these props, please visit the W3 documentation on `role="progressbar"`. This can be accessed by clicking [here](https://www.w3.org/TR/wai-aria-1.1/#progressbar).

Note that `aria-valuenow` will by default be calculated from the provided values for `aria-valuemin` (which defaults to 0), `aria-valuemax` (which defaults to 100), and `progress`. This
default can be overridden if you provide this prop explicitly.

### Example 1

<Canvas>
  <Story name="acessibility example">
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <ProgressTracker
        currentProgressLabel="50%"
        progress={50}
        aria-valuemin={100}
        aria-valuenow={150}
        aria-valuemax={200}
        aria-valuetext="$150"
      />
    </div>
  </Story>
</Canvas>

### Example 2

This example shows the automatic calculation of `aria-valuenow` when not provided (inspect the DOM, or listen using a screenreader, to see the output).

<Canvas>
  <Story name="acessibility example 2">
    <div style={{ display: "flex", justifyContent: "space-around" }}>
      <ProgressTracker progress={50} aria-valuemin={111} aria-valuemax={188} />
    </div>
  </Story>
</Canvas>

## Props

### ProgressTracker

<StyledSystemProps of={ProgressTracker} noHeader margin />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object
to the [i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "progressTracker.of",
      description: "The text for the 'of' label. I.e '10% of 100%'",
      type: "func",
      returnType: "string",
    },
  ]}
/>
