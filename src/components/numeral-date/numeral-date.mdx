import { Meta, ArgTypes, Canvas } from "@storybook/addon-docs/blocks";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import * as NumeralDateStories from "./numeral-date.stories";

<Meta of={NumeralDateStories} />

# Numeral Date

For dates far from today, use this Numeral Date component. It is advised to use Three inputs consisting of day, month, and year.
For dates close to today, we advise the use of a standard datepicker. If you require this, please see the "Date Input" component.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Validation states](#validation-states)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

Import `NumeralDate` into the project.

```javascript
import NumeralDate, { NumeralDateProps } from "carbon-react/lib/components/numeral-date";
```

## Examples

### Default

<Canvas of={NumeralDateStories.Default} />

### With Input Hint

**Note:** The `labelHelp` prop will only render as hint text when the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *true*, 
otherwise it will render as a Help tooltip (see the [With labelHelp (legacy)](#with-labelhelp-legacy) example).

<Canvas of={NumeralDateStories.WithInputHint} />

### Controlled

<Canvas of={NumeralDateStories.Controlled} />

### Allowed date formats

<Canvas of={NumeralDateStories.AllowedDateFormats} />

### Validating date values
`NumeralDate` has both error and warning states, which can be set via the `error` and `warning` props respectively. However, `NumeralDate` also has a built-in feature to validate date values automatically, so you don't have to recreate this logic yourself. 
This can be enabled via the `enableInternalError` and `enableInternalWarning` props. The rendered messages are displayed alongside the messages defined with the regular `error` and `warning` props.

This in-built validation feature uses translation keys for the invalid date messages, so you can modify them to suit your localisation needs. The keys are `numeralDate.validation.day`, `numeralDate.validation.month`, and `numeralDate.validation.year`.

#### As an error

When using the internal validations as an error, please ensure to also prevent form submission as this is not handled by the component.

<Canvas of={NumeralDateStories.InternalValidationError} />

#### As warning

When using the internal validations as a warning, the form can still be submitted as this is a non-blocking state.

<Canvas of={NumeralDateStories.InternalValidationWarning} />

### Size

You can use the `size` prop to set the size of the field.

<Canvas of={NumeralDateStories.Size} />

### Required

<Canvas of={NumeralDateStories.Required} />

### isOptional

<Canvas of={NumeralDateStories.IsOptional} />

### Programmatic Focus

It is possible to focus the `NumeralDate` component programmatically by passing a ref to the component and calling the `focus` method on it.

<Canvas of={NumeralDateStories.ProgrammaticFocus} />

### With labelInline (legacy)

Use the `labelInline` prop to display the label on the same horizontal row as the input. You can adjust its appearance using the `labelWidth` and 
`labelAlign` props to control the width and text alignment of the label and the `inputWidth` prop to control the width of the input.

**Note:** This is a legacy feature and will only render if the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *false*.

<Canvas of={NumeralDateStories.InlineLabel} />

### Enabling the adaptive behaviour

The inline label can change to be top aligned at a breakpoint. Enable this by passing in a number to the `adaptiveLabelBreakpoint` prop. This corresponds to a px screen width.

<Canvas of={NumeralDateStories.EnablingAdaptiveBehaviour} />

### With labelHelp (legacy)

**Note:** This is a legacy feature and will only render if the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *false*.

<Canvas of={NumeralDateStories.WithLabelHelp} />

### With fieldHelp (legacy)

**Note:** This is a legacy feature and will only render if the `validationRedesignOptIn` feature flag on an ancestor [CarbonProvider](../?path=/docs/carbon-provider--docs) is *false*.

<Canvas of={NumeralDateStories.WithFieldHelp} />

## Validation States

This component supports input validation, see our [Validations](../?path=/docs/documentation-validations--docs) documentation page for more information.

## Props

### NumeralDate

<ArgTypes of={NumeralDateStories} />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](../?path=/docs/documentation-i18n--docs).

<TranslationKeysTable
  translationData={[
    {
      name: "numeralDate.validation.day",
      description:
        "The text displayed in the tooltip if the day validation fails",
      type: "func",
      returnType: "string",
    },
    {
      name: "numeralDate.validation.month",
      description:
        "The text displayed in the tooltip if the month validation fails",
      type: "func",
      returnType: "string",
    },
    {
      name: "numeralDate.validation.year",
      description:
        "The text displayed in the tooltip if the year validation fails",
      type: "func",
      returnType: "string",
    },
        {
      name: "numeralDate.labels.day",
      description:
        "The text displayed within the day label",
      type: "func",
      returnType: "string",
    },
    {
      name: "numeralDate.labels.month",
      description:
        "The text displayed within the month label",
      type: "func",
      returnType: "string",
    },
    {
      name: "numeralDate.labels.year",
      description:
        "The text displayed within the year label",
      type: "func",
      returnType: "string",
    },
  ]}
/>
