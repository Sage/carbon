import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";
import CarbonProvider from "../carbon-provider/carbon-provider.component";

import NumeralDate from ".";
import * as stories from "./numeral-date.stories";

<Meta title="Numeral Date" parameters={{ info: { disable: true } }} />

# Numeral Date

For dates far from today, use this Numeral Date component. It is advised to use Three inputs consisting of day, month, and year.
For dates close to today, we advise the use of a standard datepicker. If you require this, please see the "Date Input" component.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

Import `NumeralDate` into the project.

```javascript
import NumeralDate from "carbon-react/lib/components/numeral-date";
```

## Examples

### Default

<Canvas>
  <Story name="default" story={stories.Default} />
</Canvas>

### Controlled

<Canvas>
  <Story name="controlled" story={stories.Controlled} />
</Canvas>

### Allowed date formats

<Canvas>
  <Story name="allowed date formats" story={stories.AllowedDateFormats} />
</Canvas>

### Validation

<Canvas>
  <Story name="validation" story={stories.Validation} />
</Canvas>

<Canvas>
  <Story name="new validation" story={stories.NewValidation} />
</Canvas>

### Internal validation

`NumeralDate` has an optional internal validation mechanism implemented to check if the date partial values are correct.
To enable `error` internal validation pass `enableInternalError` and to enable `warning` pass `enableInternalWarning`.
To override default messages translations can be provided with following keys: `numeralDate.day`, `numeralDate.month`, `numeralDate.year`.

#### As error

When using the internal validations as error it is necessary to also provide an external validation to avoid situations where it is possible to submit a form while `NumeralDate` clearly indicates that the date is incorrect.

<Canvas>
  <Story name="internal validation - error" story={stories.InternalValidationError} />
</Canvas>

#### As warning

When using the internal validations as warning the external validation is not necessary, in this case internal warnings can be treated as feedback.

<Canvas>
  <Story name="internal validation - warning" story={stories.InternalValidationWarning} />
</Canvas>

### With inline label

<Canvas>
  <Story name="inline label" story={stories.InlineLabel} />
</Canvas>

### Enabling the adaptive behaviour

The inline label can change to be top aligned at a breakpoint. Enable this by passing in a number to the `adaptiveLabelBreakpoint` prop. This corresponds to a px screen width

<Canvas>
  <Story name="enabling adaptive behaviour" story={stories.EnablingAdaptiveBehaviour} />
</Canvas>

### With label help

<Canvas>
  <Story name="with label help" story={stories.WithLabelHelp} />
</Canvas>

### With field help

<Canvas>
  <Story name="with field help" story={stories.WithFieldHelp} />
</Canvas>

### Size

You can use the `size` prop to set the size of the field.

<Canvas>
  <Story name="size" story={stories.Size} />
</Canvas>

## Props

### NumeralDate

<StyledSystemProps of={NumeralDate} noHeader margin />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "numeralDate.validation.day",
      description:
        "The text displayed in the tooltip if the day validation fails",
      type: "func",
      returnType: "string",
    },
    {
      name: "numeralDate.validation.month",
      description:
        "The text displayed in the tooltip if the month validation fails",
      type: "func",
      returnType: "string",
    },
    {
      name: "numeralDate.validation.year",
      description:
        "The text displayed in the tooltip if the year validation fails",
      type: "func",
      returnType: "string",
    },
  ]}
/>
