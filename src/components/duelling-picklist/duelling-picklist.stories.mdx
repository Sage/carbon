import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";

import { Picklist } from "./picklist/picklist.component";
import PicklistItem from "./picklist-item/picklist-item.component";
import PicklistDivider from "./picklist-divider/picklist-divider.component";
import PicklistPlaceholder from "./picklist-placeholder/picklist-placeholder.component";
import DuellingPicklist from "./duelling-picklist.component";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import {
  Default,
  AlternativeSearch,
  Grouped,
  InDialog,
} from "./duelling-picklist-test.stories";

<Meta
  title="DuellingPicklist"
  parameters={{ info: { disable: true }, chromatic: { disable: true } }}
/>

# Duelling Picklist

Select a subset of relatively short list.

## Contents

- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Examples](#examples)
- [Props](#props)

## Quick Start

To create fully functioning `Duelling Picklist` component you can compose it yourself out of provided `Carbon` components.

```javascript
import {
  Picklist,
  PicklistItem,
  PicklistDivider,
  PicklistPlaceholder,
  DuellingPicklist,
} from "carbon-react/lib/components/duelling-picklist";
```

## Designer Notes

`DuellingPicklist` is meant to be a container composed of two `Picklist` children and a `PicklistDivider` between them.
It also accepts `leftLabel` and `rightLabel` props of type string which will be rendered above the corresponding `PickList`s.
Similarly to labels, `leftControls` and `rightControls` props accept a node to be rendered between the labels and the `Picklist`.
This is a suitable place for components like `Search` or `Filter` used to manipulate displayed data.
To display an overlay over whole `DuellingPicklist` content pass a `disabled` prop set to true.

`Picklist` wraps a list of `PicklistItem`'s, applies enter transition animations and provides an extended keyboard navigation (up/down/home/end keys).

`PicklistDivider` as name states is a component meant to visually divide two `PickList`'s. It is optional, the spacing between the two picklists will be equal with or without it.

`PicklistItem` is a component meant to visually represent one of the iterable entities. It can be of a type `add` or `remove`.
It invokes passed `onChange` method with passed `item` prop as an argument when either `add` or `remove` icon is clicked or `space` or `enter` pressed when whole `PicklistItem` is focused.

`PicklistPlaceholder` can be used to display the content of its `text` prop. It is meant to be passed as a `placeholder` prop in `Picklist` component.

## Examples

### Default

Example of composed Duelling Picklist components with order preservation and search implemented.

<Canvas>
  <Story name="default">{Default.bind({})}</Story>
</Canvas>

### Alternative search placement

The `Search` component can be placed outside of the picklist controls and positioned anywhere as required. This example also shows the option of not using a `PicklistDivider`.

<Canvas>
  <Story name="alternative search placement">
    {AlternativeSearch.bind({})}
  </Story>
</Canvas>

### Grouped

Picklist items can be organised into selectable groups. Whole groups can be moved from one list to another at once, or group items can be moved individually.

<Canvas>
  <Story name="grouped">{Grouped.bind({})}</Story>
</Canvas>

### In Dialog

Same as above but as a children of `Dialog` component.

<Canvas>
  <Story name="in dialog">{InDialog.bind({})}</Story>
</Canvas>

## PicklistItem Examples

### Add item

<Canvas>
  <Story name="add item">
    <PicklistItem type="add" item={1} onChange={() => null}>
      <div style={{ display: "flex", width: "100%" }}>
        <div style={{ width: "50%" }}>
          <p style={{ fontWeight: 700, margin: 0, marginLeft: 24 }}>
            Title for Item
          </p>
        </div>
      </div>
    </PicklistItem>
  </Story>
</Canvas>

### Remove item

<Canvas>
  <Story name="remove item">
    <PicklistItem type="remove" item={1} onChange={() => null}>
      <div style={{ display: "flex", width: "100%" }}>
        <div style={{ width: "50%" }}>
          <p style={{ fontWeight: 700, margin: 0, marginLeft: 24 }}>
            Title for Item
          </p>
        </div>
      </div>
    </PicklistItem>
  </Story>
</Canvas>

### Locked

<Canvas>
  <Story name="locked">
    <PicklistItem type="add" item={1} onChange={() => null} locked>
      <div style={{ display: "flex", width: "100%" }}>
        <div style={{ width: "50%" }}>
          <p style={{ fontWeight: 700, margin: 0, marginLeft: 24 }}>
            Title for Item
          </p>
        </div>
      </div>
    </PicklistItem>
  </Story>
</Canvas>

### Custom tooltip message

<Canvas>
  <Story name="custom tooltip message">
    <PicklistItem
      type="add"
      item={1}
      onChange={() => null}
      locked
      tooltipMessage="This is a custom locked tooltip message"
    >
      <div style={{ display: "flex", width: "100%" }}>
        <div style={{ width: "50%" }}>
          <p style={{ fontWeight: 700, margin: 0, marginLeft: 24 }}>
            Title for Item
          </p>
        </div>
      </div>
    </PicklistItem>
  </Story>
</Canvas>

## Props:

### Picklist

<ArgsTable of={Picklist} />

### PicklistItem

<ArgsTable of={PicklistItem} />

### DuellingPicklist

<StyledSystemProps of={DuellingPicklist} noheader margin />

### PicklistDivider

`PicklistDivider` currently has no props for external use.

### PicklistPlaceholder

<ArgsTable of={PicklistPlaceholder} />
