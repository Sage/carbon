import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import Message from ".";
import Button from "../button";
import Typography, { List, ListItem } from "../typography";
import Box from "../box";
import Link from "../link";

<Meta title="Message" parameters={{ info: { disable: true } }} />

# Message

Presents a static message which stays on screen.

## Contents

- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Related Components](#related-components)
- [Examples](#examples)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

```javascript
import Message from "carbon-react/lib/components/message";
```

## Designer Notes

Useful for messages which are longer or more important, where the user needs time to interpret them, or might need to refer back to them during an activity.

Various types are available:

- **Error** - tells the user about a negative outcome that has already happened. Try to focus the message text on the action the user needs to take to be successful, rather than what went wrong.
- **Info** - gives context or advice to the user where there’s no risk of a negative outcome.
- **Success** - indicates that an activity was successful. A good example could also present the user with onward options, such as ‘View a list of items’ or ‘Create another’.
- **Warning** - warns the user about a potential negative outcome that hasn’t happened yet.
- The Transparent configuration is useful if you’d like the message to be more visually subtle, perhaps in a Dialog.

## Related Components

- Longer, time sensitive message that must be dismissed? [Try Toast](/?path=/docs/toast--default-story "Toast").
- Error or warning message that interrupts activity? [Try Alert](/?path=/docs/alert--default-story "Alert").

## Examples

### Default

Message variant is `info` by default

<Canvas>
  <Story name="default">
    {() => {
      const [isOpen, setIsOpen] = useState(true);
      return (
        <>
          {!isOpen && (
            <Button onClick={() => setIsOpen(true)}>Open Message</Button>
          )}
          <Message open={isOpen} onDismiss={() => setIsOpen(false)}>
            Some custom message
          </Message>
        </>
      );
    }}
  </Story>
</Canvas>

### Error

<Canvas>
  <Story name="error">
    {() => {
      const [isOpen, setIsOpen] = useState(true);
      return (
        <>
          {!isOpen && (
            <Button onClick={() => setIsOpen(true)}>Open Message</Button>
          )}
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="error"
          >
            Some custom message
          </Message>
        </>
      );
    }}
  </Story>
</Canvas>

### Success

<Canvas>
  <Story name="success">
    {() => {
      const [isOpen, setIsOpen] = useState(true);
      return (
        <>
          {!isOpen && (
            <Button onClick={() => setIsOpen(true)}>Open Message</Button>
          )}
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="success"
          >
            Some custom message
          </Message>
        </>
      );
    }}
  </Story>
</Canvas>

### Warning

<Canvas>
  <Story name="warning">
    {() => {
      const [isOpen, setIsOpen] = useState(true);
      return (
        <>
          {!isOpen && (
            <Button onClick={() => setIsOpen(true)}>Open Message</Button>
          )}
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="warning"
          >
            Some custom message
          </Message>
        </>
      );
    }}
  </Story>
</Canvas>

### With rich content

It is also possible to use the `List`, `ListItem` and `Typography` components to render content other than plain text in a `Message`.

<Canvas>
  <Story name="with rich content">
    {() => {
      const [isOpen, setIsOpen] = useState(true);
      return (
        <>
          {!isOpen && (
            <Button onClick={() => setIsOpen(true)}>Open Message</Button>
          )}
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="warning"
            title={<Typography variant="h4">Title</Typography>}
          >
            Some custom message
            <Box mt="8px">
              <List>
                <ListItem>
                  Some custom{" "}
                  <Typography variant="b">message as a list</Typography>.{" "}
                  <Link href="#">With a link</Link>
                </ListItem>
                <ListItem>
                  Some custom{" "}
                  <Typography variant="b">message as a list</Typography>.{" "}
                  <Link href="#">With a link</Link>
                </ListItem>
                <ListItem>
                  Some custom{" "}
                  <Typography variant="b">message as a list</Typography>.{" "}
                  <Link href="#">With a link</Link>
                </ListItem>
              </List>
            </Box>
          </Message>
        </>
      );
    }}
  </Story>
</Canvas>

### With margin

Margins can be applied to the `message` component using styled-system.
To see a full list of available margin props, please visit the props table at the bottom of this page.

[Visit Props Table](#props)

<Canvas>
  <Story name="with margin">
    {() => {
      const [isOpen, setIsOpen] = useState(true);
      return (
        <>
          {!isOpen && (
            <Button onClick={() => setIsOpen(true)}>Open Message</Button>
          )}
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="warning"
            m={1}
          >
            Some custom message
          </Message>
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="warning"
            m={3}
          >
            Some custom message
          </Message>
          <Message
            open={isOpen}
            onDismiss={() => setIsOpen(false)}
            variant="warning"
            m="16px"
          >
            Some custom message
          </Message>
        </>
      );
    }}
  </Story>
</Canvas>

## Props

### Message

<StyledSystemProps of={Message} noHeader margin />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "mssage.closeButtonAriaLabel",
      description: "The text for the aria-label attribute of the close button",
      type: "func",
      returnType: "string",
    },
  ]}
/>
