import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import Note from "./note.component";
import {
  ActionPopover,
  ActionPopoverDivider,
  ActionPopoverItem,
} from "../action-popover";
import {
  EditorState,
  ContentState,
  convertFromHTML,
  convertFromRaw,
} from "draft-js";
import LinkPreview from "../link-preview";
import * as stories from "./note.stories";

<Meta title="Note" parameters={{ info: { disable: true } }} />

# Note

The `Note` was created using the `draft-js` framework which allows rich text content to be rendered. It requires
consuming projects to install `draft-js` as a peer-dependency to enable it to work.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Note from "carbon-react/lib/components/note";
import { EditorState, ContentState, convertFromHTML } from "draft-js";
```
To use `Note`, use the import path above and pass the content via the `noteContent` prop by utilising the static
methods provided by the `draft-js` (see the import above) framework https://draftjs.org/docs/api-reference-content-state#static-methods.

## Examples

### Default

In its default form, the component can render plain text content by passing a value via the `noteContent` prop using
`EditorState.createWithContent(ContentState.createFromText(''))` to ensure the value is in the correct format.

<Canvas>
  <Story name="default" story={stories.Default} />
</Canvas>

### With rich text content

It is also possible to render rich text content: below is an example of how the component supports rendering `html`
content but there is a range of supporting packages that will support converting
content to a format you prefer and back into one that `draft-js` supports, again utilising the `createWithContent`
static method.

<Canvas>
  <Story name="with rich text" story={stories.WithRichText} />
</Canvas>

### With title

An optional title can be provided using the `title` prop.

<Canvas>
  <Story name="with title" story={stories.WithTitle} />
</Canvas>

### With inline controls

Optional inline controls can be provided using the `inlineControl` prop. This should be an `ActionPopover`.

<Canvas>
  <Story name="with inline controls" story={stories.WithInlineControls} />
</Canvas>

### With status

An optional status can be provided using the `status` prop.

<Canvas>
  <Story name="with status" story={stories.WithStatus} />
</Canvas>

### With previews

It is possible to supply link previews to the `Note` component by passing them in via the `previews` prop. Previews are
rendered as anchor elements and will behave as links, opening the page in a new tab when they are clicked or when focused
and the enter key is pressed. Similarly to the `TextEditor` component, a `onLinkAdded` prop is surfaced to allow for a link
preview's url to be reported and calls to an api can be made here as well if needed.

<Canvas>
  <Story name="with previews" story={stories.WithPreviews} />
</Canvas>

### With margin

Margins can be applied to the `note` component using styled-system. To see a full list of available margin props, please visit
the props table at the bottom of this page.

[Visit Props Table](#props)

<Canvas>
  <Story name="with margin" story={stories.WithMargin} />
</Canvas>

## Props

### Note

<StyledSystemProps of={Note} noHeader margin />
