import { Meta, ArgsTable, Canvas, Story } from "@storybook/addon-docs";
import LinkTo from "@storybook/addon-links/react";
import StyledSystemProps from "../../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../../.storybook/utils/translation-keys-table";
import SelectTextbox from "../select-textbox/select-textbox.component";
import { MultiSelect, Option } from "../";
import * as stories from "./multi-select.stories";

<Meta title="Select/MultiSelect" parameters={{ info: { disable: true } }} />

# MultiSelect

Select multiple options from the drop-down menu. MultiSelect is a component that allows to choose multiple options from the drop-down list.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

```javascript
import { MultiSelect, Option } from "carbon-react/lib/components/select";
```

Always insert `Option` Components inside the `MultiSelect`, analogous to the `<select>` and `<option>` HTML Elements.

If you type printable characters in the Textbox, you can filter through the existing options leaving only those that match the text you typed.

## Examples

### Default

<Canvas>
  <Story name="default" story={stories.Default} />
</Canvas>

### List placement

You can use `listPlacement` prop to set the position of the select list relative to the input element.

<Canvas>
  <Story name="list placement" story={stories.ListPlacement} />
</Canvas>

### List height

You can use `listMaxHeight` prop to override default max height value of select list.

<Canvas>
  <Story name="list height" story={stories.ListHeight} />
</Canvas>

### Controlled Usage

<Canvas>
  <Story name="controlled" story={stories.Controlled} />
</Canvas>

### Open on focus

<Canvas>
  <Story name="openOnFocus" story={stories.OpenOnFocus} />
</Canvas>

### Disabled

<Canvas>
  <Story name="disabled" story={stories.Disabled} />
</Canvas>

### Read Only

<Canvas>
  <Story name="readonly" story={stories.Readonly} />
</Canvas>

### With disabled portal

<Canvas>
  <Story name="withDisabledPortal" story={stories.WithDisabledPortal} />
</Canvas>

### With multiple columns:

<Canvas>
  <Story name="with multiple columns" story={stories.WithMultipleColumns} />
</Canvas>

### Required

You can use the `required` prop to indicate if the field is mandatory.

<Canvas>
  <Story name="required" story={stories.Required} />
</Canvas>

### With object as value

Option values could be passed as objects, useful when custom data is associated with an option.
When the `id` property is set, objects will be compared based on that property (could be used when the list is recreated after an API call).
If there is no `id` prop specified on an object, then the exact objects will be compared.

<Canvas>
  <Story name="with object as value" story={stories.WithObjectAsValue} />
</Canvas>

### With isLoading prop

When `isLoading` prop is passed, a loader will be appended at the end of the Select List. That functionality could be used to load the options asynchronously.

<Canvas>
  <Story name="with isLoading prop" story={stories.WithIsLoadingProp} />
</Canvas>

### Custom colored Pills

It's possible to change the appearance of the selected Pills by using the `borderColor` and `fill` props on `Option` components.

See <LinkTo kind="Documentation/Colors" name="page" story="page">Colors</LinkTo> for more information on usable colors

<Canvas>
  <Story name="with custom colored pills" story={stories.WithCustomColoredPills} />
</Canvas>

### With custom maxWidth

In this example the `maxWidth` prop is 50%.

<Canvas>
  <Story name="with custom maxWidth" story={stories.WithCustomMaxWidth} />
</Canvas>

#### New designs validation

<Canvas>
  <Story name="validations - string - new design" story={stories.ValidationsStringNewDesign} />
</Canvas>

### Pills with long text strings

By default the Pill text will wrap when it overflows the input width, you can override this by
setting the `wrapPillText` prop to false.

<Canvas>
  <Story name="pills with long text" story={stories.PillsWithLongText} />
</Canvas>

### Virtual scrolling

The `enableVirtualScroll` prop can be used to enable "virtual scrolling" to only render a few options into the DOM at any one time.
This allows an unlimited amount of children to be passed with little impact on rendering performance.

By default this will render 5 not-currently-visible options into the DOM on either side of the currently-visible ones - this value can
be customised if desired using the `virtualScrollOverscan` prop. Higher values will make scrolling smoother but may negatively impact performance.

<Canvas>
  <Story name="virtualised" story={stories.Virtualised} />
</Canvas>

## Props

### Multi Select

<StyledSystemProps of={MultiSelect} noHeader margin />

Due to the `Textbox` component being used internally by the `MultiSelect` component, most of the `Textbox` props are applicable to `MultiSelect`

<ArgsTable of={SelectTextbox} />

**Any other supplied props will be provided to the underlying HTML input element**

### Props of the Option Component

<ArgsTable of={Option} />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "select.placeholder",
      description: "The text for the input component placeholder",
      type: "func",
      returnType: "string",
    },
  ]}
/>
