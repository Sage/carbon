import { useState } from "react";
import { Meta, Story, Canvas } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import TranslationKeysTable from "../../../.storybook/utils/translation-keys-table";

import DateRange from ".";

<Meta title="Date Range" parameters={{ info: { disable: true } }} />

# Date Range

Captures a start and end date.

Used to filter a Table of data according to a start and end date, or to set two dates which are related to each other, for example, a hotel booking.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)
- [Translation keys](#translation-keys)

## Quick Start

```javascript
import DateRange from "carbon-react/lib/components/date-range";
```

### Default

<Canvas>
  <Story name="default">
    {() => {
      const [state, setState] = useState(["2016-10-01", "2016-10-30"]);
      const handleChange = ({ target }) => {
        const newValue = [target.value[0].rawValue, target.value[1].rawValue];
        setState(newValue);
      };
      return (
        <DateRange
          startLabel="Start"
          endLabel="End"
          onChange={handleChange}
          value={state}
        />
      );
    }}
  </Story>
</Canvas>

### LabelsInline

<Canvas>
  <Story name="labelsInline">
    {() => {
      const [state, setState] = useState(["2016-10-01", "2016-10-30"]);
      const handleChange = ({ target }) => {
        const newValue = [target.value[0].rawValue, target.value[1].rawValue];
        setState(newValue);
      };
      return (
        <DateRange
          startLabel="Start"
          endLabel="End"
          onChange={handleChange}
          value={state}
          labelsInline
        />
      );
    }}
  </Story>
</Canvas>

### Validations

Validation status can be set by passing `startError`, `startWarning`, `startInfo`, `endError`, `endWarning` and `endInfo` props to the component.

Passing a string to these props will display a properly colored border along with a validation icon and tooltip - string value will be displayed as the tooltip message.

Passing a boolean to these props will display only a properly colored border.

For more information check our [Validations](?path=/docs/documentation-validations--page "Validations") documentation page

#### As a string

<Canvas>
  <Story name="validations - string - component">
    {() =>
      [
        { startError: "Start Error", endError: "End Error" },
        { startWarning: "Start Warning", endWarning: "End Warning" },
        { startInfo: "Start Info", endInfo: "End Info" },
      ].map((validation) => (
        <DateRange
          key={`${Object.keys(validation)[0]}-string-component`}
          startLabel="Start"
          endLabel="End"
          value={["2016-10-01", "2016-10-30"]}
          {...validation}
        />
      ))
    }
  </Story>
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - component"
    parameters={{ chromatic: { disable: true } }}
  >
    {() =>
      [
        { startError: "Start Error", endError: "End Error" },
        { startWarning: "Start Warning", endWarning: "End Warning" },
        { startInfo: "Start Info", endInfo: "End Info" },
      ].map((validation) => (
        <DateRange
          key={`${Object.keys(validation)[0]}-string-component`}
          startLabel="Start"
          endLabel="End"
          value={["2016-10-01", "2016-10-30"]}
          {...validation}
          tooltipPosition="top"
        />
      ))
    }
  </Story>
</Canvas>

#### As a string, displayed on label

<Canvas>
  <Story name="validations - string - label">
    {() =>
      [
        { startError: "Start Error", endError: "End Error" },
        { startWarning: "Start Warning", endWarning: "End Warning" },
        { startInfo: "Start Info", endInfo: "End Info" },
      ].map((validation) => (
        <DateRange
          key={`${Object.keys(validation)[0]}-string-label`}
          startLabel="Start"
          endLabel="End"
          value={["2016-10-01", "2016-10-30"]}
          validationOnLabel
          {...validation}
        />
      ))
    }
  </Story>
</Canvas>

It is possible to use the `tooltipPosition` to override the default placement of tooltips rendered as part of this component.

<Canvas>
  <Story
    name="validations - string - with tooltipPosition overriden - label"
    parameters={{ chromatic: { disable: true } }}
  >
    {() =>
      [
        { startError: "Start Error", endError: "End Error" },
        { startWarning: "Start Warning", endWarning: "End Warning" },
        { startInfo: "Start Info", endInfo: "End Info" },
      ].map((validation) => (
        <DateRange
          key={`${Object.keys(validation)[0]}-string-label`}
          startLabel="Start"
          endLabel="End"
          value={["2016-10-01", "2016-10-30"]}
          validationOnLabel
          {...validation}
          tooltipPosition="top"
        />
      ))
    }
  </Story>
</Canvas>

#### As a boolean

<Canvas>
  <Story name="validations - boolean">
    {() =>
      [
        { startError: true, endError: true },
        { startWarning: true, endWarning: true },
        { startInfo: true, endInfo: true },
      ].map((validation) => (
        <DateRange
          key={`${Object.keys(validation)[0]}-boolean-component`}
          startLabel="Start"
          endLabel="End"
          value={["2016-10-01", "2016-10-30"]}
          {...validation}
        />
      ))
    }
  </Story>
</Canvas>

### Allow Empty Value

You can pass prop `allowEmptyValue` to start and end `DateInput` using `startDateProps` and `endDateProps`.

<Canvas>
  <Story name="allowEmptyValue">
    <DateRange
      startLabel="Start"
      endLabel="End"
      value={["", ""]}
      startDateProps={{
        allowEmptyValue: true,
      }}
      endDateProps={{
        allowEmptyValue: true,
      }}
    />
  </Story>
</Canvas>

## Props

### Date Range

<StyledSystemProps of={DateRange} noHeader margin />

## Translation keys

The following keys are available to override the translations for this component by passing in a custom locale object to the
[i18nProvider](https://carbon.sage.com/?path=/story/documentation-i18n--page).

<TranslationKeysTable
  translationData={[
    {
      name: "date.formats.inputs",
      description:
        "The valid formats for the input component, any value matching one of these formats will be parsed to a date",
      type: "func",
      returnType: "string[]",
    },
    {
      name: "date.formats.javascript",
      description:
        "The valid format for the picker/ calendar component, this the format that the input will display when it is blurred",
      type: "func",
      returnType: "string",
    },
  ]}
/>
