import { useRef, useState } from "react";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";

import {
  AnchorNavigation,
  AnchorNavigationItem,
  AnchorSectionDivider,
} from ".";
import Textbox from "../textbox";

import {
  DefaultStory,
  InFullScreenDialogStory,
} from "./anchor-navigation-test.stories.tsx";

<Meta
  title="Anchor Navigation"
  parameters={{
    info: { disable: true },
    chromatic: { disable: true },
  }}
/>

# Anchor Navigation

<a
  target="_blank"
  href="https://zeroheight.com/2ccf2b601/p/496ff6-anchor-navigation/b/285c84"
  style={{ color: '#007E45', fontWeight: 'bold', textDecoration: 'underline' }}
>
  Product Design System component 
</a>

Easily navigate through long scrollable content.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

To use `AnchorNavigation` import `AnchorNavigation`, `AnchorNavigationItem` and `AnchorSectionDivider` from Carbon.

```javascript
import {
  AnchorNavigation,
  AnchorNavigationItem,
  AnchorSectionDivider,
} from "carbon-react/lib/components/anchor-navigation";
```

- Create `refs` which will be used internally in `AnchorNavigation` to measure positions of the elements.

- Pass proper structure of `AnchorNavigationItem`'s with assigned `refs` to `stickyNavigation` prop.

- Pass children where elements which are meant to serve as sections have `refs` assigned.
- Keep in mind that to assign a `ref` to a component it either has to be a `Class` component or it has to be wrapped in `React.forwardRef()` in case of a function component.

- **It is necessary to maintain the same order of navigation items and children when assigning the `refs`**

- **It is necessary to maintain `stickyNavigation` prop structure as shown below**

```javascript
const MyComponent = () => (
  const ref1 = React.createRef();
  const ref2 = React.createRef();
  const ref3 = React.createRef();

  <AnchorNavigation
    stickyNavigation={
      <>
        <AnchorNavigationItem target={ ref1 }>
          First
        </AnchorNavigationItem>
        <AnchorNavigationItem target={ ref2 }>
          Second
        </AnchorNavigationItem>
        <AnchorNavigationItem target={ ref3 }>
          Third
        </AnchorNavigationItem>
      </>
    }
  >
    <div ref={ ref1 }>
      <h2>Section 1</h2>
    </div>
    <AnchorSectionDivider />
    <div ref={ ref2 }>
      <h2>Section 2</h2>
    </div>
    <AnchorSectionDivider />
    <div ref={ ref3 }>
      <h2>Section 3</h2>
    </div>
  </AnchorNavigation>
);
```

## Examples

### Default

`AnchorNavigation` can be placed anywhere on the page to help with navigating long scrollable sections.

<Story name="default">{DefaultStory.bind({})}</Story>

### In DialogFullScreen

`AnchorNavigation` can also be used as the content of `DialogFullScreen` component.

<Canvas>
  <Story name="in full screen dialog">{InFullScreenDialogStory.bind({})}</Story>
</Canvas>

## Props:

### AnchorNavigation

<ArgsTable of={AnchorNavigation} />

### AnchorNavigationItem

<ArgsTable of={AnchorNavigationItem} />
