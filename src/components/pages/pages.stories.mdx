import { useState } from "react";
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs";
import StyledSystemProps from "../../../.storybook/utils/styled-system-props";

import Pages, { Page } from ".";
import DialogFullScreen from "../dialog-full-screen";
import Heading from "../heading";
import Button from "../button";

<Meta
  title="Pages"
  parameters={{ info: { disable: true }, chromatic: { disableSnapshot: true } }}
/>

# Pages

Allows to slide to different pages in a full screen dialog.

## Contents

- [Quick Start](#quick-start)
- [Examples](#examples)
- [Props](#props)

## Quick Start

```javascript
import Pages, { Page } from "carbon-react/lib/components/pages";
```

## Examples

### Default

<Canvas>
  <Story name="default">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      const [pageIndex, setPageIndex] = useState(0);
      const [isDisabled, setIsDisabled] = useState(false);
      const handleCancel = () => {
        setIsOpen(false);
        setPageIndex(0);
      };
      const handleOpen = () => {
        setIsOpen(true);
        setPageIndex(0);
      };
      const handleOnClick = () => {
        setIsDisabled(true);
        setPageIndex(pageIndex + 1);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
      };
      const handleBackClick = (ev) => {
        setIsDisabled(true);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
        if (!isDisabled) {
          ev.preventDefault();
          setPageIndex(pageIndex - 1);
        }
      };
      return (
        <div>
          <Button onClick={handleOpen}>Open Preview</Button>
          <DialogFullScreen pagesStyling open={isOpen} onCancel={handleCancel}>
            <Pages pageIndex={pageIndex}>
              <Page title={<Heading title="My First Page" />}>
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to second page
                </Button>
              </Page>
              <Page
                title={
                  <Heading title="My Second Page" backLink={handleBackClick} />
                }
              >
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to third page
                </Button>
              </Page>
              <Page
                title={
                  <Heading title="My Third Page" backLink={handleBackClick} />
                }
              >
                Third Page
              </Page>
            </Pages>
          </DialogFullScreen>
        </div>
      );
    }}
  </Story>
</Canvas>

### Pages with Initial Page Index

<Canvas>
  <Story name="with Initial Page Index">
    {() => {
      let initialpageIndex = 1;
      const [isOpen, setIsOpen] = useState(false);
      const [pageIndex, setPageIndex] = useState(
        Number(initialpageIndex) ? Number(initialpageIndex) : undefined
      );
      const [isDisabled, setIsDisabled] = useState(false);
      const handleCancel = () => {
        setIsOpen(false);
        setPageIndex(0);
      };
      const handleOpen = () => {
        setIsOpen(true);
        if (!initialpageIndex) {
          setPageIndex(0);
        } else setPageIndex(Number(initialpageIndex));
      };
      const handleOnClick = () => {
        setIsDisabled(true);
        setPageIndex(pageIndex + 1);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
      };
      const handleBackClick = (ev) => {
        setIsDisabled(true);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
        if (!isDisabled) {
          ev.preventDefault();
          setPageIndex(pageIndex - 1);
        }
      };
      return (
        <div>
          <Button onClick={handleOpen}>Open Preview</Button>
          <DialogFullScreen pagesStyling open={isOpen} onCancel={handleCancel}>
            <Pages initialpageIndex={initialpageIndex} pageIndex={pageIndex}>
              <Page title={<Heading title="My First Page" />}>
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to second page
                </Button>
              </Page>
              <Page
                title={
                  <Heading title="My Second Page" backLink={handleBackClick} />
                }
              >
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to third page
                </Button>
              </Page>
              <Page
                title={
                  <Heading title="My Third Page" backLink={handleBackClick} />
                }
              >
                Third Page
              </Page>
            </Pages>
          </DialogFullScreen>
        </div>
      );
    }}
  </Story>
</Canvas>

## Inside DialogFullScreen

<Canvas>
  <Story name="inside DialogFullScreen">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      const [pageIndex, setPageIndex] = useState("");
      const [isDisabled, setIsDisabled] = useState(false);
      const handleCancel = () => {
        setIsOpen(false);
        setPageIndex(0);
      };
      const handleOpen = () => {
        setIsOpen(true);
        setPageIndex(0);
      };
      const handleOnClick = () => {
        setIsDisabled(true);
        setPageIndex(pageIndex + 1);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
      };
      const handleBackClick = (ev) => {
        setIsDisabled(true);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
        if (!isDisabled) {
          ev.preventDefault();
          setPageIndex(pageIndex - 1);
        }
      };
      return (
        <div>
          <Button onClick={handleOpen}>Open Preview</Button>
          <DialogFullScreen pagesStyling open={isOpen} onCancel={handleCancel}>
            <Pages pageIndex={pageIndex}>
              <Page title={<Heading title="My First Page" />}>
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to second page
                </Button>
              </Page>
              <Page
                title={
                  <Heading title="My Second Page" backLink={handleBackClick} />
                }
              >
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to third page
                </Button>
              </Page>
              <Page
                title={
                  <Heading title="My Third Page" backLink={handleBackClick} />
                }
              >
                Third Page
              </Page>
            </Pages>
          </DialogFullScreen>
        </div>
      );
    }}
  </Story>
</Canvas>

### Overriding content padding

<Canvas>
  <Story name="overriding content padding">
    {() => {
      const [isOpen, setIsOpen] = useState(false);
      const [pageIndex, setPageIndex] = useState(0);
      const [isDisabled, setIsDisabled] = useState(false);
      const handleCancel = () => {
        setIsOpen(false);
        setPageIndex(0);
      };
      const handleOpen = () => {
        setIsOpen(true);
        setPageIndex(0);
      };
      const handleOnClick = () => {
        setIsDisabled(true);
        setPageIndex(pageIndex + 1);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
      };
      const handleBackClick = (ev) => {
        setIsDisabled(true);
        setTimeout(() => {
          setIsDisabled(false);
        }, 50);
        if (!isDisabled) {
          ev.preventDefault();
          setPageIndex(pageIndex - 1);
        }
      };
      return (
        <div>
          <Button onClick={handleOpen}>Open Preview</Button>
          <DialogFullScreen pagesStyling open={isOpen} onCancel={handleCancel}>
            <Pages pageIndex={pageIndex}>
              <Page p={0} title={<Heading title="My First Page" />}>
                <Button onClick={handleOnClick} disabled={isDisabled}>
                  Go to Last page
                </Button>
              </Page>
              <Page
                p={0}
                title={
                  <Heading title="My Last Page" backLink={handleBackClick} />
                }
              >
                <Button onClick={handleBackClick} disabled={isDisabled}>
                  Go to First page
                </Button>
              </Page>
            </Pages>
          </DialogFullScreen>
        </div>
      );
    }}
  </Story>
</Canvas>

## Props

### Props for Pages

<ArgsTable of={Pages} />

### Props for Page

<StyledSystemProps of={Page} padding noHeader />
