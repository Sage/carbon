import { Meta, Story, Canvas } from "@storybook/addon-docs";
import { action } from "@storybook/addon-actions";
import { ArgsTable } from "@storybook/components";

import StyledSystemProps from "../../../.storybook/utils/styled-system-props";
import { DraggableContainer, DraggableItem } from ".";
import { Checkbox } from "../checkbox";

<Meta title="Draggable" parameters={{ info: { disable: true } }} />

# Draggable

Pick, move and replace an order. Draggable is a great component if you need to have interactive components
with possibility to change their order with drag and drop mechanics

## Contents

- [Quick Start](#quick-start)
- [Designer Notes](#designer-notes)
- [Examples](#examples)
- [Props](#props)

## Quick Start

To use the Draggable component you have to import two components: `<DraggableContainer />` and `<DraggableItem />`.

```javascript
import {
  DraggableContainer,
  DraggableItem,
} from "carbon-react/lib/components/draggable";
```

## Designer Notes

- Always use `DraggableItem` inside of the `DraggableContainer`
- `DraggableItem` doesn't work without `DraggableContainer`
- `DraggableItem` requires an `id` to be passed to the component
- The whole `<DraggableItem />` is draggable
- The first: `<DraggableContainer />` is a required container to let content inside of `<DraggableItem />` be draggable.
- `<DraggableItem />` Is a component that access every child to be put in.

## Examples

### Simple text as a content

<Canvas>
  <Story name="default">
    <DraggableContainer>
      <DraggableItem key="1" id={1}>
        Some content goes here
      </DraggableItem>
      <DraggableItem key="2" id={2}>
        Some content goes here
      </DraggableItem>
      <DraggableItem key="3" id={3}>
        Some content goes here
      </DraggableItem>
      <DraggableItem key="4" id={4}>
        Some content goes here
      </DraggableItem>
    </DraggableContainer>
  </Story>
</Canvas>

### Other components as children

<Canvas>
  <Story name="components as children">
    <DraggableContainer>
      <DraggableItem key="1" id={1}>
        <Checkbox label="checkbox one" mb={0} />
      </DraggableItem>
      <DraggableItem key="2" id={2}>
        <Checkbox label="checkbox two" mb={0} />
      </DraggableItem>
      <DraggableItem key="3" id={3}>
        <Checkbox label="checkbox three" mb={0} />
      </DraggableItem>
      <DraggableItem key="4" id={4}>
        <Checkbox label="checkbox four" mb={0} />
      </DraggableItem>
    </DraggableContainer>
  </Story>
</Canvas>

### With getOrder callback

<Canvas>
  <Story name="with getOrder callback">
    {() => {
      const handleUpdate = (items) => {
        action("onUpdate")(items);
      };
      return (
        <DraggableContainer getOrder={handleUpdate}>
          <DraggableItem key="1" id={1}>
            <Checkbox label="Draggable Label One" />
          </DraggableItem>
          <DraggableItem key="2" id={2}>
            <Checkbox label="Draggable Label Two" />
          </DraggableItem>
          <DraggableItem key="3" id={3}>
            <Checkbox label="Draggable Label Three" />
          </DraggableItem>
          <DraggableItem key="4" id={4}>
            <Checkbox label="Draggable Label Four" />
          </DraggableItem>
        </DraggableContainer>
      );
    }}
  </Story>
</Canvas>

## Props

### DraggableContainer

<StyledSystemProps of={DraggableContainer} noHeader margin />

### DraggableItem

<StyledSystemProps noHeader padding defaults={{ py: "8px" }} />

<ArgsTable
  rows={[
    {
      name: "id",
      type: { summary: "string | number" },
      description:
        "The id of the `DraggableItem`. Use this prop to make `Draggable` work. This prop is required.",
      required: true,
    },
    {
      name: "children",
      type: { summary: "node" },
      description: "The content of the component. This prop is required.",
      required: true,
    },
  ]}
/>
