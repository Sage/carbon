language: node_js
node_js: node

cache:
  npm: true
  directories:
    - ~/.cache

addons:
   apt:
     packages:
       # Ubuntu 16+ does not install this dependency by default, so we need to install it ourselves
       - libgconf-2-4

stages:
  - regression

jobs:
  fast_finish: true
  include:
    - &cypress-travis-regression
      stage: regression
      name: "cypress regression"
      script:
        - npm run storybook-ci </dev/null &>/dev/null &
        - wait-on http://localhost:9001
        - npm run cypress-travis-regression
    - <<: *cypress-travis-regression
      env: SUITE=regression/radioButton/radioButtonMonthly.feature
    - <<: *cypress-travis-regression
      env: SUITE=regression/radioButton/radioButtonMonthlyClassic.feature
    - <<: *cypress-travis-regression
      env: SUITE=regression/radioButton/radioButtonWeekly.feature
    - <<: *cypress-travis-regression
      env: SUITE=regression/radioButton/radioButtonWeeklyClassic.feature
    - <<: *cypress-travis-regression
      env: SUITE=regression/radioButton/radioButtonYearly.feature
    - <<: *cypress-travis-regression
      env: SUITE=regression/radioButton/radioButtonYearlyClassic.feature